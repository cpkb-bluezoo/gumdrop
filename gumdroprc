<?xml version='1.0' standalone='yes'?>
<gumdrop>
	<!-- Authentication realm -->
	<realm id="myRealm" class="org.bluezoo.gumdrop.auth.BasicRealm">
		<property name="href">myRealm.xml</property>
	</realm>
	
	<!-- Servlet container with contexts and realms -->
	<container id="mainContainer">
		<property name="hot-deploy">true</property>
		
		<!-- Map of named realms available to contexts -->
		<property name="realms">
			<map>
				<entry key="myRealm" ref="#myRealm"/>
				<entry key="Gumdrop Manager" ref="#myRealm"/>
			</map>
		</property>
		
		<!-- List of web application contexts -->
		<property name="contexts">
			<list>
				<!-- Main web application -->
				<context path="" root="web" distributable="true"/>
				<!-- Manager web application -->
				<context path="/manager" root="dist/manager.war"/>
			</list>
		</property>
	</container>
	
	<!-- Servlet container service with HTTP and HTTPS listeners -->
	<service id="http" class="org.bluezoo.gumdrop.servlet.ServletService">
		<property name="container" ref="#mainContainer"/>

		<!-- HTTP listener on port 8080 -->
		<listener class="org.bluezoo.gumdrop.http.HTTPListener">
			<property name="port">8080</property>
		</listener>

		<!-- HTTPS listener on port 8443 -->
		<listener class="org.bluezoo.gumdrop.http.HTTPListener">
			<property name="port">8443</property>
			<property name="secure">true</property>
			<property name="keystore-file">localhost+2.p12</property>
			<property name="keystore-pass">changeit</property>
		</listener>
	</service>
	
	<!-- Additional service examples (commented out) -->
	
	<!-- HTTPS with SNI (Server Name Indication) support
	     Serve different certificates based on the hostname the client requests.
	     The keystore must contain certificates with the specified aliases.
	<service id="httpsSni" class="org.bluezoo.gumdrop.servlet.ServletService">
		<property name="container" ref="#mainContainer"/>
		<listener class="org.bluezoo.gumdrop.http.HTTPListener">
			<property name="port">8444</property>
			<property name="secure">true</property>
			<property name="keystore-file">multi-domain.p12</property>
			<property name="keystore-pass">changeit</property>
			<property name="sni-hostnames">
				<map>
					<entry key="example.com" value="example-cert"/>
					<entry key="*.example.com" value="example-wildcard"/>
					<entry key="other.com" value="other-cert"/>
				</map>
			</property>
			<property name="sni-default-alias">default-cert</property>
		</listener>
	</service>
	-->
	
	<!-- File/WebDAV service
	<service id="fileHttp" class="org.bluezoo.gumdrop.webdav.WebDAVService">
		<property name="root-path">web</property>
		<property name="allow-write">false</property>
		<property name="welcome-file">index.html</property>
		<listener class="org.bluezoo.gumdrop.http.HTTPListener">
			<property name="port">8081</property>
		</listener>
	</service>
	-->
	
	<!-- File/WebDAV HTTPS service
	<service id="fileHttps" class="org.bluezoo.gumdrop.webdav.WebDAVService">
		<property name="root-path">web</property>
		<listener class="org.bluezoo.gumdrop.http.HTTPListener">
			<property name="port">8082</property>
			<property name="secure">true</property>
			<property name="keystore-file">localhost+2.p12</property>
			<property name="keystore-pass">changeit</property>
		</listener>
	</service>
	-->
	
	<!-- FTP service (requires a concrete FTPService subclass)
	<service id="ftp" class="com.example.MyFTPService">
		<property name="require-tls-for-data">false</property>
		<listener class="org.bluezoo.gumdrop.ftp.FTPListener"
		        port="8083"/>
	</service>
	-->
	
	<!-- SMTP service (requires a concrete SMTPService subclass)
	<service id="smtp" class="com.example.MySMTPService">
		<property name="realm" ref="#myRealm"/>
		<property name="max-message-size">35882577</property>
		<listener class="org.bluezoo.gumdrop.smtp.SMTPListener"
		        name="mx" port="25"/>
		<listener class="org.bluezoo.gumdrop.smtp.SMTPListener"
		        name="submission" port="587" auth-required="true"/>
		<listener class="org.bluezoo.gumdrop.smtp.SMTPListener"
		        name="smtps" port="465" secure="true"
		        keystore-file="server.p12" keystore-pass="changeit"/>
	</service>
	-->
	
	<!-- Mail servers (IMAP and POP3) require a mailbox factory for storage -->
	
	<!-- Mailbox factory for mbox-format mail storage
	<mailbox-factory id="mboxStorage" class="org.bluezoo.gumdrop.mailbox.mbox.MboxMailboxFactory">
		<property name="basedir">/var/mail/boxes</property>
		<property name="extension">.mbox</property>
	</mailbox-factory>
	-->
	
	<!-- IMAP service (requires a concrete IMAPService subclass)
	<service id="imap" class="com.example.MyIMAPService">
		<property name="realm" ref="#myRealm"/>
		<property name="mailbox-factory" ref="#mboxStorage"/>
		<property name="enable-idle">true</property>
		<property name="enable-namespace">true</property>
		<property name="enable-quota">true</property>
		<property name="enable-move">true</property>
		<property name="max-literal-size">26214400</property>
		<listener class="org.bluezoo.gumdrop.imap.IMAPListener"
		        port="143"
		        keystore-file="localhost+2.p12"
		        keystore-pass="changeit"/>
		<listener class="org.bluezoo.gumdrop.imap.IMAPListener"
		        port="993" secure="true"
		        keystore-file="localhost+2.p12"
		        keystore-pass="changeit"/>
	</service>
	-->
	
	<!-- POP3 service (requires a concrete POP3Service subclass)
	<service id="pop3" class="com.example.MyPOP3Service">
		<property name="realm" ref="#myRealm"/>
		<property name="mailbox-factory" ref="#mboxStorage"/>
		<property name="enable-apop">true</property>
		<property name="enable-utf8">true</property>
		<property name="transaction-timeout-ms">600000</property>
		<listener class="org.bluezoo.gumdrop.pop3.POP3Listener"
		        port="110"
		        keystore-file="localhost+2.p12"
		        keystore-pass="changeit"/>
		<listener class="org.bluezoo.gumdrop.pop3.POP3Listener"
		        port="995" secure="true"
		        keystore-file="localhost+2.p12"
		        keystore-pass="changeit"/>
	</service>
	-->
</gumdrop>
