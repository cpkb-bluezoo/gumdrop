<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.29) on Sat Jan 03 18:19:09 GMT 2026 -->
<title>SimpleRelayHandler (Gumdrop API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2026-01-03">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SimpleRelayHandler (Gumdrop API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SimpleRelayHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Gumdrop</b></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.bluezoo.gumdrop.smtp</a></div>
<h2 title="Class SimpleRelayHandler" class="title">Class SimpleRelayHandler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.bluezoo.gumdrop.smtp.SimpleRelayHandler</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="handler/ClientConnected.html" title="interface in org.bluezoo.gumdrop.smtp.handler">ClientConnected</a></code>, <code><a href="handler/HelloHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">HelloHandler</a></code>, <code><a href="handler/MailFromHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MailFromHandler</a></code>, <code><a href="handler/MessageDataHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MessageDataHandler</a></code>, <code><a href="handler/RecipientHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">RecipientHandler</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">SimpleRelayHandler</span>
extends java.lang.Object
implements <a href="handler/ClientConnected.html" title="interface in org.bluezoo.gumdrop.smtp.handler">ClientConnected</a>, <a href="handler/HelloHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">HelloHandler</a>, <a href="handler/MailFromHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MailFromHandler</a>, <a href="handler/RecipientHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">RecipientHandler</a>, <a href="handler/MessageDataHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MessageDataHandler</a></pre>
<div class="block">A simple SMTP relay handler that accepts messages and forwards them.

 <p>This handler provides a basic MTA relay implementation:
 <ul>
   <li>Accepts all connections, senders, and recipients</li>
   <li>Buffers incoming messages in memory</li>
   <li>Looks up MX records for recipient domains</li>
   <li>Delivers messages via SMTP client</li>
 </ul>

 <p><strong>Note:</strong> This is a simple implementation intended for
 development and testing. Production MTAs require additional features:
 <ul>
   <li>Authentication and access control</li>
   <li>Rate limiting and abuse prevention</li>
   <li>Persistent queue for retry handling</li>
   <li>SPF/DKIM/DMARC validation</li>
   <li>Content filtering</li>
 </ul>

 <h4>Configuration</h4>
 <pre><code>
 &lt;server id="smtp" class="org.bluezoo.gumdrop.smtp.SMTPServer"&gt;
     &lt;property name="port"&gt;25&lt;/property&gt;
     &lt;property name="client-connected-factory"&gt;org.bluezoo.gumdrop.smtp.SimpleRelayHandlerFactory&lt;/property&gt;
 &lt;/server&gt;
 </code></pre></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href='mailto:dog@gnu.org'>Chris Burdess</a></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="SimpleRelayHandlerFactory.html" title="class in org.bluezoo.gumdrop.smtp"><code>SimpleRelayHandlerFactory</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.bluezoo.gumdrop.dns.DNSResolver,java.lang.String)">SimpleRelayHandler</a></span>&#8203;(<a href="../dns/DNSResolver.html" title="class in org.bluezoo.gumdrop.dns">DNSResolver</a>&nbsp;dnsResolver,
                  java.lang.String&nbsp;localHostname)</code></th>
<td class="colLast">
<div class="block">Creates a new relay handler.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#authenticated(java.security.Principal,org.bluezoo.gumdrop.smtp.handler.AuthenticateState)">authenticated</a></span>&#8203;(java.security.Principal&nbsp;principal,
             <a href="handler/AuthenticateState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">AuthenticateState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">Called after successful SASL authentication.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connected(org.bluezoo.gumdrop.ConnectionInfo,org.bluezoo.gumdrop.smtp.handler.ConnectedState)">connected</a></span>&#8203;(<a href="../ConnectionInfo.html" title="interface in org.bluezoo.gumdrop">ConnectionInfo</a>&nbsp;info,
         <a href="handler/ConnectedState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">ConnectedState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">Called when a new client connection is established.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#disconnected()">disconnected</a></span>()</code></th>
<td class="colLast">
<div class="block">Called when the connection is closed for any reason.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="SMTPPipeline.html" title="interface in org.bluezoo.gumdrop.smtp">SMTPPipeline</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPipeline()">getPipeline</a></span>()</code></th>
<td class="colLast">
<div class="block">Called before each new mail transaction to get the processing pipeline.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#hello(boolean,java.lang.String,org.bluezoo.gumdrop.smtp.handler.HelloState)">hello</a></span>&#8203;(boolean&nbsp;extended,
     java.lang.String&nbsp;hostname,
     <a href="handler/HelloState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">HelloState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">Called when the client sends HELO or EHLO.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#mailFrom(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress,boolean,org.bluezoo.gumdrop.smtp.DeliveryRequirements,org.bluezoo.gumdrop.smtp.handler.MailFromState)">mailFrom</a></span>&#8203;(<a href="../mime/rfc5322/EmailAddress.html" title="class in org.bluezoo.gumdrop.mime.rfc5322">EmailAddress</a>&nbsp;sender,
        boolean&nbsp;smtputf8,
        <a href="DeliveryRequirements.html" title="interface in org.bluezoo.gumdrop.smtp">DeliveryRequirements</a>&nbsp;deliveryRequirements,
        <a href="handler/MailFromState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MailFromState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">Called when client sends MAIL FROM.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#messageAborted()">messageAborted</a></span>()</code></th>
<td class="colLast">
<div class="block">Called if the message transfer is aborted mid-stream.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#messageComplete(org.bluezoo.gumdrop.smtp.handler.MessageEndState)">messageComplete</a></span>&#8203;(<a href="handler/MessageEndState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MessageEndState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">Called when message transfer is complete.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#messageContent(java.nio.ByteBuffer)">messageContent</a></span>&#8203;(java.nio.ByteBuffer&nbsp;content)</code></th>
<td class="colLast">
<div class="block">Called with message content as it arrives.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#quit()">quit</a></span>()</code></th>
<td class="colLast">
<div class="block">Called when the client sends QUIT.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#rcptTo(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress,org.bluezoo.gumdrop.mailbox.MailboxFactory,org.bluezoo.gumdrop.smtp.handler.RecipientState)">rcptTo</a></span>&#8203;(<a href="../mime/rfc5322/EmailAddress.html" title="class in org.bluezoo.gumdrop.mime.rfc5322">EmailAddress</a>&nbsp;recipient,
      <a href="../mailbox/MailboxFactory.html" title="interface in org.bluezoo.gumdrop.mailbox">MailboxFactory</a>&nbsp;factory,
      <a href="handler/RecipientState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">RecipientState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">Called when client sends RCPT TO.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reset(org.bluezoo.gumdrop.smtp.handler.ResetState)">reset</a></span>&#8203;(<a href="handler/ResetState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">ResetState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">Called when client sends RSET.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startMessage(org.bluezoo.gumdrop.smtp.handler.MessageStartState)">startMessage</a></span>&#8203;(<a href="handler/MessageStartState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MessageStartState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">Called when client sends DATA or BDAT to begin message transfer.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tlsEstablished(org.bluezoo.gumdrop.TLSInfo)">tlsEstablished</a></span>&#8203;(<a href="../TLSInfo.html" title="interface in org.bluezoo.gumdrop">TLSInfo</a>&nbsp;tlsInfo)</code></th>
<td class="colLast">
<div class="block">Called when TLS is established after STARTTLS.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.bluezoo.gumdrop.dns.DNSResolver,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SimpleRelayHandler</h4>
<pre>public&nbsp;SimpleRelayHandler&#8203;(<a href="../dns/DNSResolver.html" title="class in org.bluezoo.gumdrop.dns">DNSResolver</a>&nbsp;dnsResolver,
                          java.lang.String&nbsp;localHostname)</pre>
<div class="block">Creates a new relay handler.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dnsResolver</code> - the DNS resolver for MX lookups</dd>
<dd><code>localHostname</code> - the local hostname for EHLO</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="connected(org.bluezoo.gumdrop.ConnectionInfo,org.bluezoo.gumdrop.smtp.handler.ConnectedState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connected</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;connected&#8203;(<a href="../ConnectionInfo.html" title="interface in org.bluezoo.gumdrop">ConnectionInfo</a>&nbsp;info,
                      <a href="handler/ConnectedState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">ConnectedState</a>&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/ClientConnected.html#connected(org.bluezoo.gumdrop.ConnectionInfo,org.bluezoo.gumdrop.smtp.handler.ConnectedState)">ClientConnected</a></code></span></div>
<div class="block">Called when a new client connection is established.
 
 <p>This is called immediately after the TCP connection is accepted and
 any TLS handshake is completed (for implicit TLS connections). The
 handler should evaluate whether to accept this connection and call
 the appropriate method on the state interface.
 
 <p>The connection information includes:
 <ul>
   <li>Client and server socket addresses</li>
   <li>TLS status and certificate information (if secure)</li>
 </ul>
 
 <p>To accept the connection, call <code>state.acceptConnection()</code> with
 a greeting message and the handler for the next state. To reject, call
 <code>state.rejectConnection()</code>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/ClientConnected.html#connected(org.bluezoo.gumdrop.ConnectionInfo,org.bluezoo.gumdrop.smtp.handler.ConnectedState)">connected</a></code>&nbsp;in interface&nbsp;<code><a href="handler/ClientConnected.html" title="interface in org.bluezoo.gumdrop.smtp.handler">ClientConnected</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>info</code> - connection information (addresses, TLS status)</dd>
<dd><code>state</code> - operations available for responding</dd>
</dl>
</li>
</ul>
<a id="disconnected()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disconnected</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;disconnected()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/ClientConnected.html#disconnected()">ClientConnected</a></code></span></div>
<div class="block">Called when the connection is closed for any reason.
 
 <p>This may be called at any point in the protocol if the client
 disconnects, the server closes the connection, or an error occurs.
 Implementations should clean up any per-connection resources.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/ClientConnected.html#disconnected()">disconnected</a></code>&nbsp;in interface&nbsp;<code><a href="handler/ClientConnected.html" title="interface in org.bluezoo.gumdrop.smtp.handler">ClientConnected</a></code></dd>
</dl>
</li>
</ul>
<a id="hello(boolean,java.lang.String,org.bluezoo.gumdrop.smtp.handler.HelloState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hello</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;hello&#8203;(boolean&nbsp;extended,
                  java.lang.String&nbsp;hostname,
                  <a href="handler/HelloState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">HelloState</a>&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/HelloHandler.html#hello(boolean,java.lang.String,org.bluezoo.gumdrop.smtp.handler.HelloState)">HelloHandler</a></code></span></div>
<div class="block">Called when the client sends HELO or EHLO.
 
 <p>The handler should evaluate the client's hostname and decide
 whether to accept or reject the greeting. Accepting transitions
 to the mail-from ready state.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/HelloHandler.html#hello(boolean,java.lang.String,org.bluezoo.gumdrop.smtp.handler.HelloState)">hello</a></code>&nbsp;in interface&nbsp;<code><a href="handler/HelloHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">HelloHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>extended</code> - true for EHLO (Extended SMTP), false for HELO</dd>
<dd><code>hostname</code> - the client's announced hostname</dd>
<dd><code>state</code> - operations for responding to the greeting</dd>
</dl>
</li>
</ul>
<a id="tlsEstablished(org.bluezoo.gumdrop.TLSInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tlsEstablished</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;tlsEstablished&#8203;(<a href="../TLSInfo.html" title="interface in org.bluezoo.gumdrop">TLSInfo</a>&nbsp;tlsInfo)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/HelloHandler.html#tlsEstablished(org.bluezoo.gumdrop.TLSInfo)">HelloHandler</a></code></span></div>
<div class="block">Called when TLS is established after STARTTLS.
 
 <p>STARTTLS is handled automatically by the connection. This
 notification allows the handler to log the TLS upgrade or
 adjust policy based on TLS parameters.
 
 <p>After this call, the client must re-issue EHLO per RFC 3207,
 which will arrive via <a href="handler/HelloHandler.html#hello(boolean,java.lang.String,org.bluezoo.gumdrop.smtp.handler.HelloState)"><code>HelloHandler.hello(boolean, java.lang.String, org.bluezoo.gumdrop.smtp.handler.HelloState)</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/HelloHandler.html#tlsEstablished(org.bluezoo.gumdrop.TLSInfo)">tlsEstablished</a></code>&nbsp;in interface&nbsp;<code><a href="handler/HelloHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">HelloHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tlsInfo</code> - information about the TLS session</dd>
</dl>
</li>
</ul>
<a id="authenticated(java.security.Principal,org.bluezoo.gumdrop.smtp.handler.AuthenticateState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authenticated</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;authenticated&#8203;(java.security.Principal&nbsp;principal,
                          <a href="handler/AuthenticateState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">AuthenticateState</a>&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/HelloHandler.html#authenticated(java.security.Principal,org.bluezoo.gumdrop.smtp.handler.AuthenticateState)">HelloHandler</a></code></span></div>
<div class="block">Called after successful SASL authentication.
 
 <p>The connection handles the SASL exchange (challenges, responses).
 This method is called after successful authentication with the
 authenticated identity.
 
 <p>The handler should decide whether to accept this principal
 for sending mail.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/HelloHandler.html#authenticated(java.security.Principal,org.bluezoo.gumdrop.smtp.handler.AuthenticateState)">authenticated</a></code>&nbsp;in interface&nbsp;<code><a href="handler/HelloHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">HelloHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>principal</code> - the authenticated identity</dd>
<dd><code>state</code> - operations for accepting or rejecting</dd>
</dl>
</li>
</ul>
<a id="getPipeline()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPipeline</h4>
<pre class="methodSignature">public&nbsp;<a href="SMTPPipeline.html" title="interface in org.bluezoo.gumdrop.smtp">SMTPPipeline</a>&nbsp;getPipeline()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/MailFromHandler.html#getPipeline()">MailFromHandler</a></code></span></div>
<div class="block">Called before each new mail transaction to get the processing pipeline.
 
 <p>The returned pipeline (if non-null) receives notifications as the
 transaction progresses:
 <ul>
   <li><a href="SMTPPipeline.html#mailFrom(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress)"><code>SMTPPipeline.mailFrom(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress)</code></a> when MAIL FROM is accepted</li>
   <li><a href="SMTPPipeline.html#rcptTo(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress)"><code>SMTPPipeline.rcptTo(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress)</code></a> when each RCPT TO is accepted</li>
   <li><a href="SMTPPipeline.html#getMessageChannel()"><code>SMTPPipeline.getMessageChannel()</code></a> at message transfer start</li>
   <li><a href="SMTPPipeline.html#endData()"><code>SMTPPipeline.endData()</code></a> when message transfer completes</li>
   <li><a href="SMTPPipeline.html#reset()"><code>SMTPPipeline.reset()</code></a> on RSET or transaction end</li>
 </ul>
 
 <p>This is typically used to create an <a href="auth/AuthPipeline.html" title="class in org.bluezoo.gumdrop.smtp.auth"><code>AuthPipeline</code></a>
 for SPF/DKIM/DMARC validation. Return null if no pipeline processing is needed.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/MailFromHandler.html#getPipeline()">getPipeline</a></code>&nbsp;in interface&nbsp;<code><a href="handler/MailFromHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MailFromHandler</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the pipeline for this transaction, or null</dd>
</dl>
</li>
</ul>
<a id="mailFrom(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress,boolean,org.bluezoo.gumdrop.smtp.DeliveryRequirements,org.bluezoo.gumdrop.smtp.handler.MailFromState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mailFrom</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;mailFrom&#8203;(<a href="../mime/rfc5322/EmailAddress.html" title="class in org.bluezoo.gumdrop.mime.rfc5322">EmailAddress</a>&nbsp;sender,
                     boolean&nbsp;smtputf8,
                     <a href="DeliveryRequirements.html" title="interface in org.bluezoo.gumdrop.smtp">DeliveryRequirements</a>&nbsp;deliveryRequirements,
                     <a href="handler/MailFromState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MailFromState</a>&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/MailFromHandler.html#mailFrom(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress,boolean,org.bluezoo.gumdrop.smtp.DeliveryRequirements,org.bluezoo.gumdrop.smtp.handler.MailFromState)">MailFromHandler</a></code></span></div>
<div class="block">Called when client sends MAIL FROM.
 
 <p>The handler should evaluate the sender and delivery requirements,
 then call the appropriate method on the state interface to accept
 or reject.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/MailFromHandler.html#mailFrom(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress,boolean,org.bluezoo.gumdrop.smtp.DeliveryRequirements,org.bluezoo.gumdrop.smtp.handler.MailFromState)">mailFrom</a></code>&nbsp;in interface&nbsp;<code><a href="handler/MailFromHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MailFromHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sender</code> - the sender address, or null for bounce messages (&lt;&gt;)</dd>
<dd><code>smtputf8</code> - true if SMTPUTF8 extension requested (RFC 6531)</dd>
<dd><code>deliveryRequirements</code> - delivery options (REQUIRETLS, DSN, priority, etc.)</dd>
<dd><code>state</code> - operations for responding</dd>
</dl>
</li>
</ul>
<a id="reset(org.bluezoo.gumdrop.smtp.handler.ResetState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;reset&#8203;(<a href="handler/ResetState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">ResetState</a>&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/MailFromHandler.html#reset(org.bluezoo.gumdrop.smtp.handler.ResetState)">MailFromHandler</a></code></span></div>
<div class="block">Called when client sends RSET.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/MailFromHandler.html#reset(org.bluezoo.gumdrop.smtp.handler.ResetState)">reset</a></code>&nbsp;in interface&nbsp;<code><a href="handler/MailFromHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MailFromHandler</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/RecipientHandler.html#reset(org.bluezoo.gumdrop.smtp.handler.ResetState)">reset</a></code>&nbsp;in interface&nbsp;<code><a href="handler/RecipientHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">RecipientHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - operations for responding</dd>
</dl>
</li>
</ul>
<a id="quit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>quit</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;quit()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/HelloHandler.html#quit()">HelloHandler</a></code></span></div>
<div class="block">Called when the client sends QUIT.
 
 <p>The connection will send a 221 response and close.
 <a href="handler/ClientConnected.html#disconnected()"><code>ClientConnected.disconnected()</code></a> will be called.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/HelloHandler.html#quit()">quit</a></code>&nbsp;in interface&nbsp;<code><a href="handler/HelloHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">HelloHandler</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/MailFromHandler.html#quit()">quit</a></code>&nbsp;in interface&nbsp;<code><a href="handler/MailFromHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MailFromHandler</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/RecipientHandler.html#quit()">quit</a></code>&nbsp;in interface&nbsp;<code><a href="handler/RecipientHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">RecipientHandler</a></code></dd>
</dl>
</li>
</ul>
<a id="rcptTo(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress,org.bluezoo.gumdrop.mailbox.MailboxFactory,org.bluezoo.gumdrop.smtp.handler.RecipientState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rcptTo</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;rcptTo&#8203;(<a href="../mime/rfc5322/EmailAddress.html" title="class in org.bluezoo.gumdrop.mime.rfc5322">EmailAddress</a>&nbsp;recipient,
                   <a href="../mailbox/MailboxFactory.html" title="interface in org.bluezoo.gumdrop.mailbox">MailboxFactory</a>&nbsp;factory,
                   <a href="handler/RecipientState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">RecipientState</a>&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/RecipientHandler.html#rcptTo(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress,org.bluezoo.gumdrop.mailbox.MailboxFactory,org.bluezoo.gumdrop.smtp.handler.RecipientState)">RecipientHandler</a></code></span></div>
<div class="block">Called when client sends RCPT TO.
 
 <p>The handler should validate the recipient (mailbox exists, quotas,
 relay permissions, etc.) and call the appropriate method on the
 state interface.
 
 <p>If the server is configured with a MailboxFactory for local delivery,
 the handler can check if a mailbox exists for this recipient to make
 appropriate policy decisions.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/RecipientHandler.html#rcptTo(org.bluezoo.gumdrop.mime.rfc5322.EmailAddress,org.bluezoo.gumdrop.mailbox.MailboxFactory,org.bluezoo.gumdrop.smtp.handler.RecipientState)">rcptTo</a></code>&nbsp;in interface&nbsp;<code><a href="handler/RecipientHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">RecipientHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recipient</code> - the recipient address</dd>
<dd><code>factory</code> - the mailbox factory for local delivery (may be null)</dd>
<dd><code>state</code> - operations for responding</dd>
</dl>
</li>
</ul>
<a id="startMessage(org.bluezoo.gumdrop.smtp.handler.MessageStartState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startMessage</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;startMessage&#8203;(<a href="handler/MessageStartState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MessageStartState</a>&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/RecipientHandler.html#startMessage(org.bluezoo.gumdrop.smtp.handler.MessageStartState)">RecipientHandler</a></code></span></div>
<div class="block">Called when client sends DATA or BDAT to begin message transfer.
 
 <p>This is only called when at least one recipient has been accepted.
 The handler does not need to know whether the client used DATA or
 BDAT - the transport difference is handled by the connection.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/RecipientHandler.html#startMessage(org.bluezoo.gumdrop.smtp.handler.MessageStartState)">startMessage</a></code>&nbsp;in interface&nbsp;<code><a href="handler/RecipientHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">RecipientHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - operations for message transfer</dd>
</dl>
</li>
</ul>
<a id="messageContent(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messageContent</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;messageContent&#8203;(java.nio.ByteBuffer&nbsp;content)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/MessageDataHandler.html#messageContent(java.nio.ByteBuffer)">MessageDataHandler</a></code></span></div>
<div class="block">Called with message content as it arrives.
 
 <p>This method is called incrementally as message bytes are received.
 The buffer contains raw RFC 5322 message bytes (headers and body).
 For DATA transfer, dot-stuffing has already been removed.
 
 <p>If a pipeline is provided via <a href="handler/MailFromHandler.html#getPipeline()"><code>MailFromHandler.getPipeline()</code></a>,
 the pipeline receives the bytes instead and this method is not called.
 
 <p>The buffer is temporary and should be consumed or copied before
 this method returns.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/MessageDataHandler.html#messageContent(java.nio.ByteBuffer)">messageContent</a></code>&nbsp;in interface&nbsp;<code><a href="handler/MessageDataHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MessageDataHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>content</code> - the message content bytes</dd>
</dl>
</li>
</ul>
<a id="messageComplete(org.bluezoo.gumdrop.smtp.handler.MessageEndState)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messageComplete</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;messageComplete&#8203;(<a href="handler/MessageEndState.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MessageEndState</a>&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/MessageDataHandler.html#messageComplete(org.bluezoo.gumdrop.smtp.handler.MessageEndState)">MessageDataHandler</a></code></span></div>
<div class="block">Called when message transfer is complete.
 
 <p>This is called after all message bytes have been received
 (either via DATA terminator CRLF.CRLF or final BDAT LAST chunk).
 The pipeline's <code>endData()</code> method has been called before
 this notification.
 
 <p>The handler should finalize message processing and call the
 appropriate method on the state interface:
 <ul>
   <li><a href="handler/MessageEndState.html#acceptMessageDelivery(java.lang.String,org.bluezoo.gumdrop.smtp.handler.MailFromHandler)"><code>MessageEndState.acceptMessageDelivery(java.lang.String, org.bluezoo.gumdrop.smtp.handler.MailFromHandler)</code></a> to accept</li>
   <li><a href="handler/MessageEndState.html#rejectMessageTemporary(java.lang.String,org.bluezoo.gumdrop.smtp.handler.MailFromHandler)"><code>MessageEndState.rejectMessageTemporary(java.lang.String, org.bluezoo.gumdrop.smtp.handler.MailFromHandler)</code></a> for temp failure</li>
   <li><a href="handler/MessageEndState.html#rejectMessagePermanent(java.lang.String,org.bluezoo.gumdrop.smtp.handler.MailFromHandler)"><code>MessageEndState.rejectMessagePermanent(java.lang.String, org.bluezoo.gumdrop.smtp.handler.MailFromHandler)</code></a> for perm failure</li>
 </ul></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/MessageDataHandler.html#messageComplete(org.bluezoo.gumdrop.smtp.handler.MessageEndState)">messageComplete</a></code>&nbsp;in interface&nbsp;<code><a href="handler/MessageDataHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MessageDataHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - operations for finalizing the message</dd>
</dl>
</li>
</ul>
<a id="messageAborted()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>messageAborted</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;messageAborted()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="handler/MessageDataHandler.html#messageAborted()">MessageDataHandler</a></code></span></div>
<div class="block">Called if the message transfer is aborted mid-stream.
 
 <p>This can happen if:
 <ul>
   <li>The client disconnects during transfer</li>
   <li>The message exceeds size limits</li>
   <li>A BDAT chunk contains malformed data</li>
   <li>An I/O error occurs</li>
 </ul>
 
 <p>No response is expected after this notification.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="handler/MessageDataHandler.html#messageAborted()">messageAborted</a></code>&nbsp;in interface&nbsp;<code><a href="handler/MessageDataHandler.html" title="interface in org.bluezoo.gumdrop.smtp.handler">MessageDataHandler</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SimpleRelayHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Copyright &copy; 2005, 2025 Chris Burdess. Licensed under LGPL.</div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><small>Gumdrop is free software distributed under the GNU Lesser General Public License.</small></small></p>
</footer>
</body>
</html>
