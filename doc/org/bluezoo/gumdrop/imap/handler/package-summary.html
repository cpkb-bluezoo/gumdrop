<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.29) on Sat Jan 03 18:09:22 GMT 2026 -->
<title>org.bluezoo.gumdrop.imap.handler (Gumdrop API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2026-01-03">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.bluezoo.gumdrop.imap.handler (Gumdrop API)";
        }
    }
    catch(err) {
    }
//-->
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Gumdrop</b></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<main role="main">
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.bluezoo.gumdrop.imap.handler</h1>
</div>
<div class="contentContainer">
<section><a id="package.description">
<!--   -->
</a>
<div class="block">Handler interfaces for the IMAP server.
 
 <p>This package contains the staged handler interfaces for IMAP4rev2
 server-side implementations (RFC 9051). Handlers make <strong>policy
 decisions</strong> while protocol mechanics are handled automatically
 by the server.
 
 <h2>Design Principles</h2>
 
 <ul>
   <li><strong>Handlers make policy decisions</strong> - authentication
       acceptance, access control, quota enforcement, mailbox permissions</li>
   <li><strong>Protocol details are hidden</strong> - tags, CAPABILITY,
       NOOP, LOGOUT, STARTTLS, LOGIN/AUTHENTICATE mechanics, IDLE, STATUS
       are handled automatically</li>
   <li><strong>Type-safe state transitions</strong> - each handler method
       provides a State interface with only valid operations</li>
   <li><strong>Context is provided</strong> - handler methods receive the
       <a href="../../mailbox/MailboxStore.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>MailboxStore</code></a> and/or
       <a href="../../mailbox/Mailbox.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>Mailbox</code></a> needed to implement
       the operation</li>
 </ul>
 
 <h2>Handler Interfaces</h2>
 
 <ul>
   <li><a href="ClientConnected.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>ClientConnected</code></a> - entry point for new connections</li>
   <li><a href="NotAuthenticatedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>NotAuthenticatedHandler</code></a> - authentication policy decisions</li>
   <li><a href="AuthenticatedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>AuthenticatedHandler</code></a> - mailbox access after login</li>
   <li><a href="SelectedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>SelectedHandler</code></a> - message operations in a mailbox</li>
 </ul>
 
 <h2>Handler Flow</h2>
 
 <pre><code>
 Connection established
       |
       v
 ClientConnected.connected(info, ConnectedState)
       |
       +---&gt; ConnectedState.acceptConnection() --&gt; NotAuthenticatedHandler
       |
       +---&gt; ConnectedState.acceptPreauth() --&gt; AuthenticatedHandler
       |
       +---&gt; ConnectedState.rejectConnection() --&gt; disconnected()
       
 NotAuthenticatedHandler:
       |
       +---&gt; authenticate(principal, factory) --&gt; AuthenticateState.accept() --&gt; AuthenticatedHandler
       
 AuthenticatedHandler:
       |
       +---&gt; select()/examine() --&gt; SelectState.selectOk() --&gt; SelectedHandler
       |
       +---&gt; create/delete/rename/list/append/quota --&gt; stay in AuthenticatedHandler
       
 SelectedHandler:
       |
       +---&gt; store/copy/move/expunge --&gt; stay in SelectedHandler
       |
       +---&gt; close/unselect --&gt; CloseState.closed() --&gt; AuthenticatedHandler
       |
       +---&gt; select() --&gt; SelectState.selectOk() --&gt; SelectedHandler (different mailbox)
 </code></pre>
 
 <p>Note: Authentication mechanics (LOGIN command, AUTHENTICATE SASL) are
 handled internally by IMAPConnection using the configured Realm. The handler
 only receives an authenticate event with the verified Principal, allowing it
 to make policy decisions without dealing with authentication protocol details.
 
 <h2>Example Implementation</h2>
 
 <pre><code>
 public class SimpleIMAPHandler implements ClientConnected, NotAuthenticatedHandler,
                                           AuthenticatedHandler, SelectedHandler {
     
     public void connected(ConnectionInfo info, ConnectedState state) {
         // Policy: accept or reject based on IP, rate limiting, etc.
         state.acceptConnection("IMAP4rev2 server ready", this);
     }
     
     public void authenticate(Principal principal, MailboxFactory factory,
                              AuthenticateState state) {
         // Policy: does this principal have a mailbox store?
         try {
             MailboxStore store = factory.createStore();
             store.open(principal.getName());
             state.accept(store, this);
         } catch (IOException e) {
             state.reject("Mailbox unavailable", this);
         }
     }
     
     // The MailboxStore is passed to handler methods that need it
     public void select(MailboxStore store, String mailboxName, SelectState state) {
         // Policy: access control for the mailbox
         Mailbox mailbox = store.getMailbox(mailboxName);
         if (mailbox == null) {
             state.mailboxNotFound("Mailbox not found", this);
         } else {
             state.selectOk(mailbox, false, ...flags..., this);
         }
     }
     
     // Selected state methods receive the current Mailbox
     public void expunge(Mailbox mailbox, ExpungeState state) {
         mailbox.expunge();
         state.expungeComplete(this);
     }
     
     public void disconnected() {
         // Cleanup if needed
     }
 }
 </code></pre></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href='mailto:dog@gnu.org'>Chris Burdess</a></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="ClientConnected.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>ClientConnected</code></a>, 
<a href="ClientConnectedFactory.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>ClientConnectedFactory</code></a></dd>
</dl>
</section>
<ul class="blockList">
<li class="blockList">
<table class="typeSummary">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="AppendCompleteState.html" title="interface in org.bluezoo.gumdrop.imap.handler">AppendCompleteState</a></th>
<td class="colLast">
<div class="block">Operations available after APPEND data is received.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="AppendDataHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler">AppendDataHandler</a></th>
<td class="colLast">
<div class="block">Handler for receiving APPEND message data.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="AppendState.html" title="interface in org.bluezoo.gumdrop.imap.handler">AppendState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to an APPEND command.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="AuthenticatedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler">AuthenticatedHandler</a></th>
<td class="colLast">
<div class="block">Handler for IMAP AUTHENTICATED state commands.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="AuthenticatedStatusState.html" title="interface in org.bluezoo.gumdrop.imap.handler">AuthenticatedStatusState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to a STATUS command in AUTHENTICATED state.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="AuthenticateState.html" title="interface in org.bluezoo.gumdrop.imap.handler">AuthenticateState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to an authentication event.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="ClientConnected.html" title="interface in org.bluezoo.gumdrop.imap.handler">ClientConnected</a></th>
<td class="colLast">
<div class="block">Entry point handler for new IMAP client connections.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="ClientConnectedFactory.html" title="interface in org.bluezoo.gumdrop.imap.handler">ClientConnectedFactory</a></th>
<td class="colLast">
<div class="block">Factory for creating <a href="ClientConnected.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>ClientConnected</code></a> handler instances.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="CloseState.html" title="interface in org.bluezoo.gumdrop.imap.handler">CloseState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to CLOSE or UNSELECT commands.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="ConnectedState.html" title="interface in org.bluezoo.gumdrop.imap.handler">ConnectedState</a></th>
<td class="colLast">
<div class="block">Operations available immediately after a client connection is established.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="CopyState.html" title="interface in org.bluezoo.gumdrop.imap.handler">CopyState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to COPY commands.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="CreateState.html" title="interface in org.bluezoo.gumdrop.imap.handler">CreateState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to a CREATE command.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="DeleteState.html" title="interface in org.bluezoo.gumdrop.imap.handler">DeleteState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to a DELETE command.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="ExpungeState.html" title="interface in org.bluezoo.gumdrop.imap.handler">ExpungeState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to EXPUNGE commands.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="FetchState.html" title="interface in org.bluezoo.gumdrop.imap.handler">FetchState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to a FETCH command.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="ListState.html" title="interface in org.bluezoo.gumdrop.imap.handler">ListState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to LIST or LSUB commands.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="ListState.ListWriter.html" title="interface in org.bluezoo.gumdrop.imap.handler">ListState.ListWriter</a></th>
<td class="colLast">
<div class="block">Writer for list entries.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="MoveState.html" title="interface in org.bluezoo.gumdrop.imap.handler">MoveState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to MOVE commands.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="NotAuthenticatedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler">NotAuthenticatedHandler</a></th>
<td class="colLast">
<div class="block">Handler for IMAP NOT_AUTHENTICATED state.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="QuotaState.html" title="interface in org.bluezoo.gumdrop.imap.handler">QuotaState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to quota commands.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="RenameState.html" title="interface in org.bluezoo.gumdrop.imap.handler">RenameState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to a RENAME command.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="SearchState.html" title="interface in org.bluezoo.gumdrop.imap.handler">SearchState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to a SEARCH command.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="SelectedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler">SelectedHandler</a></th>
<td class="colLast">
<div class="block">Handler for IMAP SELECTED state commands.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="SelectedStatusState.html" title="interface in org.bluezoo.gumdrop.imap.handler">SelectedStatusState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to a STATUS command in SELECTED state.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="SelectState.html" title="interface in org.bluezoo.gumdrop.imap.handler">SelectState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to SELECT or EXAMINE commands.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="StoreState.html" title="interface in org.bluezoo.gumdrop.imap.handler">StoreState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to STORE commands.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="SubscribeState.html" title="interface in org.bluezoo.gumdrop.imap.handler">SubscribeState</a></th>
<td class="colLast">
<div class="block">Operations available when responding to SUBSCRIBE or UNSUBSCRIBE commands.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="DefaultIMAPHandler.html" title="class in org.bluezoo.gumdrop.imap.handler">DefaultIMAPHandler</a></th>
<td class="colLast">
<div class="block">Default IMAP handler implementation that accepts all operations.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Copyright &copy; 2005, 2025 Chris Burdess. Licensed under LGPL.</div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><small>Gumdrop is free software distributed under the GNU Lesser General Public License.</small></small></p>
</footer>
</body>
</html>
