<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Sat Jan 10 08:09:18 GMT 2026 -->
<title>org.bluezoo.gumdrop.imap.handler (Gumdrop API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2026-01-10">
<meta name="description" content="declaration: package: org.bluezoo.gumdrop.imap.handler">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><b>Gumdrop</b></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html#package">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Package:</p>
<ul>
<li><a href="#package-description">Description</a></li>
<li><a href="#related-package-summary">Related Packages</a></li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li><a href="#related-package-summary">Related Packages</a>&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package org.bluezoo.gumdrop.imap.handler" class="title">Package org.bluezoo.gumdrop.imap.handler</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">org.bluezoo.gumdrop.imap.handler</span></div>
<section class="package-description" id="package-description">
<div class="block">Handler interfaces for the IMAP server.
 
 <p>This package contains the staged handler interfaces for IMAP4rev2
 server-side implementations (RFC 9051). Handlers make <strong>policy
 decisions</strong> while protocol mechanics are handled automatically
 by the server.
 
 <h2 id="design-principles-heading">Design Principles</h2>
 
 <ul>
   <li><strong>Handlers make policy decisions</strong> - authentication
       acceptance, access control, quota enforcement, mailbox permissions</li>
   <li><strong>Protocol details are hidden</strong> - tags, CAPABILITY,
       NOOP, LOGOUT, STARTTLS, LOGIN/AUTHENTICATE mechanics, IDLE, STATUS
       are handled automatically</li>
   <li><strong>Type-safe state transitions</strong> - each handler method
       provides a State interface with only valid operations</li>
   <li><strong>Context is provided</strong> - handler methods receive the
       <a href="../../mailbox/MailboxStore.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>MailboxStore</code></a> and/or
       <a href="../../mailbox/Mailbox.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>Mailbox</code></a> needed to implement
       the operation</li>
 </ul>
 
 <h2 id="handler-interfaces-heading">Handler Interfaces</h2>
 
 <ul>
   <li><a href="ClientConnected.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>ClientConnected</code></a> - entry point for new connections</li>
   <li><a href="NotAuthenticatedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>NotAuthenticatedHandler</code></a> - authentication policy decisions</li>
   <li><a href="AuthenticatedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>AuthenticatedHandler</code></a> - mailbox access after login</li>
   <li><a href="SelectedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>SelectedHandler</code></a> - message operations in a mailbox</li>
 </ul>
 
 <h2 id="handler-flow-heading">Handler Flow</h2>
 
 <pre><code>
 Connection established
       |
       v
 ClientConnected.connected(info, ConnectedState)
       |
       +---&gt; ConnectedState.acceptConnection() --&gt; NotAuthenticatedHandler
       |
       +---&gt; ConnectedState.acceptPreauth() --&gt; AuthenticatedHandler
       |
       +---&gt; ConnectedState.rejectConnection() --&gt; disconnected()
       
 NotAuthenticatedHandler:
       |
       +---&gt; authenticate(principal, factory) --&gt; AuthenticateState.accept() --&gt; AuthenticatedHandler
       
 AuthenticatedHandler:
       |
       +---&gt; select()/examine() --&gt; SelectState.selectOk() --&gt; SelectedHandler
       |
       +---&gt; create/delete/rename/list/append/quota --&gt; stay in AuthenticatedHandler
       
 SelectedHandler:
       |
       +---&gt; store/copy/move/expunge --&gt; stay in SelectedHandler
       |
       +---&gt; close/unselect --&gt; CloseState.closed() --&gt; AuthenticatedHandler
       |
       +---&gt; select() --&gt; SelectState.selectOk() --&gt; SelectedHandler (different mailbox)
 </code></pre>
 
 <p>Note: Authentication mechanics (LOGIN command, AUTHENTICATE SASL) are
 handled internally by IMAPConnection using the configured Realm. The handler
 only receives an authenticate event with the verified Principal, allowing it
 to make policy decisions without dealing with authentication protocol details.
 
 <h2 id="example-implementation-heading">Example Implementation</h2>
 
 <pre><code>
 public class SimpleIMAPHandler implements ClientConnected, NotAuthenticatedHandler,
                                           AuthenticatedHandler, SelectedHandler {
     
     public void connected(ConnectionInfo info, ConnectedState state) {
         // Policy: accept or reject based on IP, rate limiting, etc.
         state.acceptConnection("IMAP4rev2 server ready", this);
     }
     
     public void authenticate(Principal principal, MailboxFactory factory,
                              AuthenticateState state) {
         // Policy: does this principal have a mailbox store?
         try {
             MailboxStore store = factory.createStore();
             store.open(principal.getName());
             state.accept(store, this);
         } catch (IOException e) {
             state.reject("Mailbox unavailable", this);
         }
     }
     
     // The MailboxStore is passed to handler methods that need it
     public void select(MailboxStore store, String mailboxName, SelectState state) {
         // Policy: access control for the mailbox
         Mailbox mailbox = store.getMailbox(mailboxName);
         if (mailbox == null) {
             state.mailboxNotFound("Mailbox not found", this);
         } else {
             state.selectOk(mailbox, false, ...flags..., this);
         }
     }
     
     // Selected state methods receive the current Mailbox
     public void expunge(Mailbox mailbox, ExpungeState state) {
         mailbox.expunge();
         state.expungeComplete(this);
     }
     
     public void disconnected() {
         // Cleanup if needed
     }
 }
 </code></pre></div>
<dl class="notes">
<dt>Author:</dt>
<dd><a href='mailto:dog@gnu.org'>Chris Burdess</a></dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="ClientConnected.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>ClientConnected</code></a></li>
<li><a href="ClientConnectedFactory.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>ClientConnectedFactory</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="related-package-summary">
<div class="caption"><span>Related Packages</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><a href="../package-summary.html">org.bluezoo.gumdrop.imap</a></div>
<div class="col-last even-row-color">
<div class="block">IMAP4rev2 server implementation for Gumdrop.</div>
</div>
</div>
</div>
</li>
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab1" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab1', 2)" class="table-tab">Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button></div>
<div id="class-summary.tabpanel" role="tabpanel" aria-labelledby="class-summary-tab0">
<div class="summary-table two-column-summary">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="AppendCompleteState.html" title="interface in org.bluezoo.gumdrop.imap.handler">AppendCompleteState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available after APPEND data is received.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="AppendDataHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler">AppendDataHandler</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Handler for receiving APPEND message data.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="AppendState.html" title="interface in org.bluezoo.gumdrop.imap.handler">AppendState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to an APPEND command.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="AuthenticatedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler">AuthenticatedHandler</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Handler for IMAP AUTHENTICATED state commands.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="AuthenticatedStatusState.html" title="interface in org.bluezoo.gumdrop.imap.handler">AuthenticatedStatusState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to a STATUS command in AUTHENTICATED state.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="AuthenticateState.html" title="interface in org.bluezoo.gumdrop.imap.handler">AuthenticateState</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to an authentication event.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="ClientConnected.html" title="interface in org.bluezoo.gumdrop.imap.handler">ClientConnected</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Entry point handler for new IMAP client connections.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="ClientConnectedFactory.html" title="interface in org.bluezoo.gumdrop.imap.handler">ClientConnectedFactory</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Factory for creating <a href="ClientConnected.html" title="interface in org.bluezoo.gumdrop.imap.handler"><code>ClientConnected</code></a> handler instances.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="CloseState.html" title="interface in org.bluezoo.gumdrop.imap.handler">CloseState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to CLOSE or UNSELECT commands.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="ConnectedState.html" title="interface in org.bluezoo.gumdrop.imap.handler">ConnectedState</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Operations available immediately after a client connection is established.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="CopyState.html" title="interface in org.bluezoo.gumdrop.imap.handler">CopyState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to COPY commands.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="CreateState.html" title="interface in org.bluezoo.gumdrop.imap.handler">CreateState</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to a CREATE command.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="DefaultIMAPHandler.html" title="class in org.bluezoo.gumdrop.imap.handler">DefaultIMAPHandler</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Default IMAP handler implementation that accepts all operations.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="DeleteState.html" title="interface in org.bluezoo.gumdrop.imap.handler">DeleteState</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to a DELETE command.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="ExpungeState.html" title="interface in org.bluezoo.gumdrop.imap.handler">ExpungeState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to EXPUNGE commands.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="FetchState.html" title="interface in org.bluezoo.gumdrop.imap.handler">FetchState</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to a FETCH command.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="ListState.html" title="interface in org.bluezoo.gumdrop.imap.handler">ListState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to LIST or LSUB commands.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="ListState.ListWriter.html" title="interface in org.bluezoo.gumdrop.imap.handler">ListState.ListWriter</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Writer for list entries.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="MoveState.html" title="interface in org.bluezoo.gumdrop.imap.handler">MoveState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to MOVE commands.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="NotAuthenticatedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler">NotAuthenticatedHandler</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Handler for IMAP NOT_AUTHENTICATED state.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="QuotaState.html" title="interface in org.bluezoo.gumdrop.imap.handler">QuotaState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to quota commands.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="RenameState.html" title="interface in org.bluezoo.gumdrop.imap.handler">RenameState</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to a RENAME command.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="SearchState.html" title="interface in org.bluezoo.gumdrop.imap.handler">SearchState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to a SEARCH command.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="SelectedHandler.html" title="interface in org.bluezoo.gumdrop.imap.handler">SelectedHandler</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Handler for IMAP SELECTED state commands.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="SelectedStatusState.html" title="interface in org.bluezoo.gumdrop.imap.handler">SelectedStatusState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to a STATUS command in SELECTED state.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="SelectState.html" title="interface in org.bluezoo.gumdrop.imap.handler">SelectState</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to SELECT or EXAMINE commands.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="StoreState.html" title="interface in org.bluezoo.gumdrop.imap.handler">StoreState</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to STORE commands.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="SubscribeState.html" title="interface in org.bluezoo.gumdrop.imap.handler">SubscribeState</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Operations available when responding to SUBSCRIBE or UNSUBSCRIBE commands.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><small>Gumdrop is free software distributed under the GNU Lesser General Public License.</small></small></p>
</footer>
</div>
</div>
</body>
</html>
