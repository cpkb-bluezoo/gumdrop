<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.29) on Sat Jan 03 18:09:22 GMT 2026 -->
<title>org.bluezoo.gumdrop.pop3 (Gumdrop API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2026-01-03">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.bluezoo.gumdrop.pop3 (Gumdrop API)";
        }
    }
    catch(err) {
    }
//-->
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Gumdrop</b></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<main role="main">
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.bluezoo.gumdrop.pop3</h1>
</div>
<div class="contentContainer">
<section><a id="package.description">
<!--   -->
</a>
<div class="block">POP3 (Post Office Protocol version 3) server implementation.

 <p>This package provides a complete POP3 server implementation for the
 gumdrop multipurpose Java server framework. The POP3 server allows email
 clients to retrieve messages from mailboxes using the standard POP3 protocol
 as defined in RFC 1939, with support for modern extensions.

 <h2>Architecture</h2>

 <h3>Core Components</h3>
 <ul>
   <li><a href="POP3Server.html" title="class in org.bluezoo.gumdrop.pop3"><code>POP3Server</code></a> - Server connector that listens for POP3 connections</li>
   <li><a href="POP3Connection.html" title="class in org.bluezoo.gumdrop.pop3"><code>POP3Connection</code></a> - Connection handler implementing the POP3 protocol</li>
   <li><a href="POP3Exception.html" title="class in org.bluezoo.gumdrop.pop3"><code>POP3Exception</code></a> - POP3-specific exceptions</li>
 </ul>

 <h3>Mailbox Storage</h3>
 <p>The POP3 server uses the <a href="../mailbox/package-summary.html"><code>org.bluezoo.gumdrop.mailbox</code></a> package for
 mailbox storage, which provides a pluggable storage backend:
 <ul>
   <li><a href="../mailbox/Mailbox.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>Mailbox</code></a> - Interface for accessing mailbox contents</li>
   <li><a href="../mailbox/MailboxFactory.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>MailboxFactory</code></a> - Factory for creating mailbox instances</li>
   <li><a href="../mailbox/mbox/MboxMailbox.html" title="class in org.bluezoo.gumdrop.mailbox.mbox"><code>MboxMailbox</code></a> - Mbox file format implementation</li>
 </ul>

 <h2>Supported RFCs</h2>
 <ul>
   <li><a href="https://www.rfc-editor.org/rfc/rfc1939">RFC 1939</a> - POP3 base protocol</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc1957">RFC 1957</a> - Implementation recommendations</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc2195">RFC 2195</a> - CRAM-MD5 authentication</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc2449">RFC 2449</a> - POP3 Extension Mechanism (CAPA command)</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc2595">RFC 2595</a> - TLS for POP3 (STLS command)</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc2831">RFC 2831</a> - DIGEST-MD5 authentication</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc4422">RFC 4422</a> - SASL EXTERNAL mechanism</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc4616">RFC 4616</a> - SASL PLAIN mechanism</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc4752">RFC 4752</a> - GSSAPI/Kerberos authentication</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc5034">RFC 5034</a> - SASL Authentication for POP3 (AUTH command)</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc5802">RFC 5802</a> - SCRAM mechanism</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc6816">RFC 6816</a> - UTF-8 support</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc7628">RFC 7628</a> - OAUTHBEARER SASL mechanism</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc7677">RFC 7677</a> - SCRAM-SHA-256 mechanism</li>
   <li><a href="https://www.rfc-editor.org/rfc/rfc8314">RFC 8314</a> - Require TLS for email access</li>
 </ul>

 <h2>Supported Commands</h2>

 <h3>Required Commands (RFC 1939)</h3>
 <ul>
   <li><code>USER</code> - Specify username for authentication</li>
   <li><code>PASS</code> - Provide password for authentication</li>
   <li><code>STAT</code> - Get mailbox statistics (count and size)</li>
   <li><code>LIST</code> - List messages with sizes</li>
   <li><code>RETR</code> - Retrieve a message</li>
   <li><code>DELE</code> - Mark a message for deletion</li>
   <li><code>NOOP</code> - No operation</li>
   <li><code>RSET</code> - Reset session (undelete all messages)</li>
   <li><code>QUIT</code> - End session and update mailbox</li>
 </ul>

 <h3>Optional Commands (RFC 1939)</h3>
 <ul>
   <li><code>APOP</code> - Challenge-response authentication</li>
   <li><code>TOP</code> - Retrieve message headers and N body lines</li>
   <li><code>UIDL</code> - Get unique message identifiers</li>
 </ul>

 <h3>Extension Commands (RFC 2449, RFC 2595, RFC 5034, RFC 6816)</h3>
 <ul>
   <li><code>AUTH</code> - SASL authentication (PLAIN, LOGIN, CRAM-MD5, DIGEST-MD5,
       SCRAM-SHA-256, OAUTHBEARER, GSSAPI, EXTERNAL, NTLM)</li>
   <li><code>CAPA</code> - List server capabilities</li>
   <li><code>STLS</code> - Upgrade connection to TLS</li>
   <li><code>UTF8</code> - Enable UTF-8 mode</li>
 </ul>

 <h2>POP3 Protocol States</h2>

 <h3>AUTHORIZATION</h3>
 <p>Initial state after connection. Client must authenticate using:
 <ul>
   <li>USER/PASS commands, or</li>
   <li>APOP command (challenge-response), or</li>
   <li>AUTH command with SASL mechanism</li>
 </ul>

 <h3>TRANSACTION</h3>
 <p>After successful authentication. Client can:
 <ul>
   <li>Retrieve messages (RETR, TOP)</li>
   <li>Mark messages for deletion (DELE)</li>
   <li>Get mailbox statistics (STAT, LIST, UIDL)</li>
   <li>Reset deletions (RSET)</li>
 </ul>

 <h3>UPDATE</h3>
 <p>After QUIT command. Server:
 <ul>
   <li>Commits message deletions</li>
   <li>Releases mailbox lock</li>
   <li>Closes connection</li>
 </ul>

 <h2>Security Features</h2>

 <h3>Transport Security</h3>
 <ul>
   <li><b>POP3S</b> - Implicit TLS on port 995 (secure=true)</li>
   <li><b>STARTTLS</b> - Upgrade to TLS via STLS command (secure=false with SSL context)</li>
 </ul>

 <h3>Authentication</h3>
 <p>All authentication mechanisms use the standard Gumdrop
 <a href="../auth/Realm.html" title="interface in org.bluezoo.gumdrop.auth"><code>Realm</code></a> interface:

 <table border="1" cellpadding="5">
   <caption>Authentication Mechanisms</caption>
   <tr><th>Mechanism</th><th>Realm Method</th><th>RFC</th><th>Description</th></tr>
   <tr><td>USER/PASS</td><td><code>passwordMatch()</code></td><td>RFC 1939</td><td>Basic authentication</td></tr>
   <tr><td>APOP</td><td><code>getPassword()</code></td><td>RFC 1939</td><td>MD5 challenge-response</td></tr>
   <tr><td>AUTH PLAIN</td><td><code>passwordMatch()</code></td><td>RFC 4616</td><td>SASL PLAIN mechanism</td></tr>
   <tr><td>AUTH LOGIN</td><td><code>passwordMatch()</code></td><td>-</td><td>Legacy SASL LOGIN</td></tr>
   <tr><td>AUTH CRAM-MD5</td><td><code>getPassword()</code></td><td>RFC 2195</td><td>HMAC-MD5 challenge-response</td></tr>
   <tr><td>AUTH DIGEST-MD5</td><td><code>getDigestHA1()</code></td><td>RFC 2831</td><td>HTTP Digest-style auth</td></tr>
   <tr><td>AUTH SCRAM-SHA-256</td><td><code>getPassword()</code></td><td>RFC 7677</td><td>Salted challenge-response</td></tr>
   <tr><td>AUTH OAUTHBEARER</td><td><code>validateBearerToken()</code></td><td>RFC 7628</td><td>OAuth 2.0 Bearer tokens</td></tr>
   <tr><td>AUTH GSSAPI</td><td>SASL/Kerberos</td><td>RFC 4752</td><td>Enterprise SSO</td></tr>
   <tr><td>AUTH EXTERNAL</td><td>Certificate</td><td>RFC 4422</td><td>TLS client certificate</td></tr>
   <tr><td>AUTH NTLM</td><td><code>getPassword()</code></td><td>-</td><td>Windows domain auth</td></tr>
 </table>

 <h3>Attack Mitigation</h3>
 <ul>
   <li>Login delay enforcement after failed authentication</li>
   <li>Session timeout protection</li>
   <li>Line length limits to prevent buffer overflow</li>
   <li>Mailbox locking to prevent concurrent access</li>
 </ul>

 <h2>Configuration Example</h2>

 <pre><code>
 &lt;!-- POP3 with STARTTLS support (port 110) --&gt;
 &lt;server class="org.bluezoo.gumdrop.pop3.POP3Server" port="110"
     realm="myRealm"
     loginDelay="3000"
     enableAPOP="true"
     enableUTF8="true"
     keystoreFile="/path/to/keystore.p12"
     keystorePass="password"/&gt;

 &lt;!-- POP3S with implicit TLS (port 995) --&gt;
 &lt;server class="org.bluezoo.gumdrop.pop3.POP3Server" port="995"
     secure="true"
     realm="myRealm"
     keystoreFile="/path/to/keystore.p12"
     keystorePass="password"/&gt;
 </code></pre>

 <p>Note: The <code>mailboxFactory</code> must be configured programmatically or via a
 custom configuration extension, as the standard gumdroprc format uses
 attributes for simple properties only.

 <h2>Creating Custom Mailbox Implementations</h2>

 <p>To integrate with your own email storage system, implement the
 <a href="../mailbox/Mailbox.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>Mailbox</code></a> interface:

 <pre>
 public class MyCustomMailbox implements Mailbox &#123;
     &#64;Override
     public void open(String username) throws IOException &#123;
         // Open mailbox for user
     &#125;

     &#64;Override
     public void close(boolean expunge) throws IOException &#123;
         // Close and optionally commit deletions
     &#125;

     &#64;Override
     public int getMessageCount() throws IOException &#123;
         // Return number of messages
     &#125;

     // ... implement other methods
 &#125;
 </pre>

 <p>Then create a <a href="../mailbox/MailboxFactory.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>MailboxFactory</code></a>:

 <pre>
 public class MyCustomMailboxFactory implements MailboxFactory &#123;
     &#64;Override
     public Mailbox createMailbox() &#123;
         return new MyCustomMailbox();
     &#125;
 &#125;
 </pre>

 <h2>Thread Safety</h2>
 <ul>
   <li>Each POP3 connection gets its own <a href="../mailbox/Mailbox.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>Mailbox</code></a> instance</li>
   <li>Mailboxes use file locking to prevent concurrent access</li>
   <li>Connection handlers are thread-safe via synchronization</li>
 </ul></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href='mailto:dog@gnu.org'>Chris Burdess</a></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="POP3Server.html" title="class in org.bluezoo.gumdrop.pop3"><code>POP3Server</code></a>, 
<a href="POP3Connection.html" title="class in org.bluezoo.gumdrop.pop3"><code>POP3Connection</code></a>, 
<a href="../mailbox/Mailbox.html" title="interface in org.bluezoo.gumdrop.mailbox"><code>Mailbox</code></a>, 
<a href="../mailbox/mbox/MboxMailbox.html" title="class in org.bluezoo.gumdrop.mailbox.mbox"><code>MboxMailbox</code></a>, 
<a href="../auth/Realm.html" title="interface in org.bluezoo.gumdrop.auth"><code>Realm</code></a>, 
<a href="https://www.rfc-editor.org/rfc/rfc1939">RFC 1939 - POP3</a>, 
<a href="https://www.rfc-editor.org/rfc/rfc5034">RFC 5034 - SASL for POP3</a></dd>
</dl>
</section>
<ul class="blockList">
<li class="blockList">
<table class="typeSummary">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="POP3Connection.html" title="class in org.bluezoo.gumdrop.pop3">POP3Connection</a></th>
<td class="colLast">
<div class="block">Connection handler for the POP3 protocol.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="POP3Server.html" title="class in org.bluezoo.gumdrop.pop3">POP3Server</a></th>
<td class="colLast">
<div class="block">Connection factory for POP3 connections on a given port.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="POP3ServerMetrics.html" title="class in org.bluezoo.gumdrop.pop3">POP3ServerMetrics</a></th>
<td class="colLast">
<div class="block">OpenTelemetry metrics for POP3 servers.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="POP3Exception.html" title="class in org.bluezoo.gumdrop.pop3">POP3Exception</a></th>
<td class="colLast">
<div class="block">Exception thrown for POP3 protocol errors.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Copyright &copy; 2005, 2025 Chris Burdess. Licensed under LGPL.</div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><small>Gumdrop is free software distributed under the GNU Lesser General Public License.</small></small></p>
</footer>
</body>
</html>
