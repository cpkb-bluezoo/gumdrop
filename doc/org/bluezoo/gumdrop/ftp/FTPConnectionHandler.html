<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Sat Jan 10 08:58:12 GMT 2026 -->
<title>FTPConnectionHandler (Gumdrop API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2026-01-10">
<meta name="description" content="declaration: package: org.bluezoo.gumdrop.ftp, interface: FTPConnectionHandler">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><b>Gumdrop</b></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/FTPConnectionHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.bluezoo.gumdrop.ftp</a></div>
<h1 title="Interface FTPConnectionHandler" class="title">Interface FTPConnectionHandler</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="file/AnonymousFTPHandler.html" title="class in org.bluezoo.gumdrop.ftp.file">AnonymousFTPHandler</a></code>, <code><a href="file/RoleBasedFTPHandler.html" title="class in org.bluezoo.gumdrop.ftp.file">RoleBasedFTPHandler</a></code>, <code><a href="file/SimpleFTPHandler.html" title="class in org.bluezoo.gumdrop.ftp.file">SimpleFTPHandler</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">FTPConnectionHandler</span></div>
<div class="block">Handler interface for FTP connection events and business logic.
 <p>
 This interface abstracts away all low-level FTP protocol details and allows
 implementers to focus purely on the business logic of file operations and
 user management. The handler receives high-level events (authentication,
 file operations) along with rich metadata about the connection context.
 <p>
 Key benefits of this abstraction:
 <ul>
 <li><em>Protocol Independence</em> - No need to understand FTP response codes</li>
 <li><em>Rich Context</em> - Access to client IP, certificates, authentication status</li>
 <li><em>Business Focused</em> - Simple enum returns for operation results</li>
 <li><em>File System Abstraction</em> - Work with any storage backend</li>
 <li><em>Connection Lifecycle</em> - Notifications for connection events</li>
 </ul>
 <p>
 Handler instances should be created per-connection to ensure thread safety
 and state isolation between connections:
 <pre><code>
 // Example implementation
 public class MyFTPHandler implements FTPConnectionHandler {
     private final FTPFileSystem fileSystem;
     private final UserDatabase userDb;

     public MyFTPHandler(FTPFileSystem fs, UserDatabase db) {
         this.fileSystem = fs;
         this.userDb = db;
     }

     &#64;Override
     public FTPAuthenticationResult authenticate(String user, String password, 
                                               String account, FTPConnectionMetadata metadata) {
         if (userDb.validateCredentials(user, password)) {
             return FTPAuthenticationResult.SUCCESS;
         }
         return FTPAuthenticationResult.INVALID_PASSWORD;
     }

     &#64;Override
     public FTPFileSystem getFileSystem(FTPConnectionMetadata metadata) {
         // Return file system scoped to authenticated user
         return new UserScopedFileSystem(fileSystem, metadata.getAuthenticatedUser());
     }
 }
 </code></pre></div>
<dl class="notes">
<dt>Author:</dt>
<dd><a href='mailto:dog@gnu.org'>Chris Burdess</a></dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="FTPAuthenticationResult.html" title="enum in org.bluezoo.gumdrop.ftp"><code>FTPAuthenticationResult</code></a></li>
<li><a href="FTPFileOperationResult.html" title="enum in org.bluezoo.gumdrop.ftp"><code>FTPFileOperationResult</code></a></li>
<li><a href="FTPFileSystem.html" title="interface in org.bluezoo.gumdrop.ftp"><code>FTPFileSystem</code></a></li>
<li><a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp"><code>FTPConnectionMetadata</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="FTPAuthenticationResult.html" title="enum in org.bluezoo.gumdrop.ftp">FTPAuthenticationResult</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#authenticate(java.lang.String,java.lang.String,java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">authenticate</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;account,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Handles FTP authentication (USER/PASS/ACCT command sequence).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#canStore(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">canStore</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 long&nbsp;bytesToStore,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Checks if storage of the specified size is allowed for the user.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#connected(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">connected</a><wbr>(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Notifies that a new client connection has been established.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#disconnected(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">disconnected</a><wbr>(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Notifies that the client connection has been closed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="FTPFileSystem.html" title="interface in org.bluezoo.gumdrop.ftp">FTPFileSystem</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getFileSystem(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">getFileSystem</a><wbr>(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Provides the file system implementation for this connection.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../quota/Quota.html" title="class in org.bluezoo.gumdrop.quota">Quota</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#getQuota(java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">getQuota</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Gets the current quota status for a user.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../quota/QuotaManager.html" title="interface in org.bluezoo.gumdrop.quota">QuotaManager</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#getQuotaManager()" class="member-name-link">getQuotaManager</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Gets the quota manager for this handler, if quota enforcement is enabled.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="FTPFileOperationResult.html" title="enum in org.bluezoo.gumdrop.ftp">FTPFileOperationResult</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#handleSiteCommand(java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">handleSiteCommand</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;command,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Handles SITE-specific commands.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#isAuthorized(org.bluezoo.gumdrop.ftp.FTPOperation,java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">isAuthorized</a><wbr>(<a href="FTPOperation.html" title="enum in org.bluezoo.gumdrop.ftp">FTPOperation</a>&nbsp;operation,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Checks if the authenticated user is authorized to perform an operation.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#recordBytesAdded(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">recordBytesAdded</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 long&nbsp;bytesAdded,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Records that bytes were added (after successful upload).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#recordBytesRemoved(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">recordBytesRemoved</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 long&nbsp;bytesRemoved,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Records that bytes were removed (after successful delete).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#transferCompleted(java.lang.String,boolean,long,boolean,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">transferCompleted</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 boolean&nbsp;upload,
 long&nbsp;totalBytesTransferred,
 boolean&nbsp;success,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Called when a data transfer has completed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#transferProgress(java.lang.String,boolean,java.nio.ByteBuffer,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">transferProgress</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 boolean&nbsp;upload,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;data,
 long&nbsp;totalBytesTransferred,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Called during data transfer to provide transfer progress updates.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#transferStarting(java.lang.String,boolean,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)" class="member-name-link">transferStarting</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 boolean&nbsp;upload,
 long&nbsp;size,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Called when a data transfer (upload/download) is starting.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="connected(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>connected</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">connected</span><wbr><span class="parameters">(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Notifies that a new client connection has been established.
 <p>
 This is called immediately after the TCP connection is accepted and any
 SSL/TLS handshake is completed. It provides an opportunity to perform
 early connection-level filtering, logging, or initialization.
 <p>
 The handler can send a custom welcome banner by returning a string,
 or return null to use the default welcome message.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>metadata</code> - connection metadata with client and security information</dd>
<dt>Returns:</dt>
<dd>custom welcome banner, or null for default</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="authenticate(java.lang.String,java.lang.String,java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>authenticate</h3>
<div class="member-signature"><span class="return-type"><a href="FTPAuthenticationResult.html" title="enum in org.bluezoo.gumdrop.ftp">FTPAuthenticationResult</a></span>&nbsp;<span class="element-name">authenticate</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;account,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Handles FTP authentication (USER/PASS/ACCT command sequence).
 <p>
 This method is called to authenticate a user with the provided credentials.
 The implementation should validate the user against whatever authentication
 backend is appropriate (database, LDAP, etc.).
 <p>
 Authentication considerations:
 <ul>
 <li>Anonymous FTP (user="anonymous" or "ftp")</li>
 <li>Standard username/password authentication</li>
 <li>Account information for systems that require it</li>
 <li>Rate limiting for failed attempts</li>
 <li>Account status checking (enabled, expired, etc.)</li>
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>username</code> - the username from USER command</dd>
<dd><code>password</code> - the password from PASS command (can be null if not provided yet)</dd>
<dd><code>account</code> - the account from ACCT command (can be null if not provided)</dd>
<dd><code>metadata</code> - complete connection context</dd>
<dt>Returns:</dt>
<dd>authentication result indicating success, failure, or need for more information</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFileSystem(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>getFileSystem</h3>
<div class="member-signature"><span class="return-type"><a href="FTPFileSystem.html" title="interface in org.bluezoo.gumdrop.ftp">FTPFileSystem</a></span>&nbsp;<span class="element-name">getFileSystem</span><wbr><span class="parameters">(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Provides the file system implementation for this connection.
 <p>
 This method is called after successful authentication to get the
 file system that should be used for this user's session. Different
 users may get different file system implementations with different
 access rights, root directories, etc.
 <p>
 Examples:
 <ul>
 <li>Anonymous users get read-only access to public directory</li>
 <li>Regular users get access to their home directory</li>
 <li>Admin users get full file system access</li>
 <li>Virtual users get database-backed file systems</li>
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>metadata</code> - connection context including authenticated user</dd>
<dt>Returns:</dt>
<dd>file system implementation for this user</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="transferStarting(java.lang.String,boolean,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>transferStarting</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">transferStarting</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 boolean&nbsp;upload,
 long&nbsp;size,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Called when a data transfer (upload/download) is starting.
 <p>
 This provides an opportunity to set up logging, progress tracking,
 virus scanning, or other transfer-related processing.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - the file path being transferred</dd>
<dd><code>upload</code> - true for upload (STOR), false for download (RETR)</dd>
<dd><code>size</code> - expected transfer size in bytes (-1 if unknown)</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="transferProgress(java.lang.String,boolean,java.nio.ByteBuffer,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>transferProgress</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">transferProgress</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 boolean&nbsp;upload,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;data,
 long&nbsp;totalBytesTransferred,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Called during data transfer to provide transfer progress updates.
 <p>
 This method is called periodically during file transfers with
 chunks of data. It can be used for:
 <ul>
 <li>Progress tracking and reporting</li>
 <li>Real-time virus scanning</li>
 <li>Content filtering</li>
 <li>Transfer rate limiting</li>
 <li>Custom logging</li>
 </ul>
 <p>
 The handler should process the data quickly to avoid slowing
 down the transfer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - the file path being transferred</dd>
<dd><code>upload</code> - true for upload, false for download</dd>
<dd><code>data</code> - the data chunk being transferred</dd>
<dd><code>totalBytesTransferred</code> - total bytes transferred so far</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="transferCompleted(java.lang.String,boolean,long,boolean,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>transferCompleted</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">transferCompleted</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 boolean&nbsp;upload,
 long&nbsp;totalBytesTransferred,
 boolean&nbsp;success,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Called when a data transfer has completed.
 <p>
 This provides an opportunity for cleanup, final processing,
 statistics recording, etc.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - the file path that was transferred</dd>
<dd><code>upload</code> - true for upload, false for download</dd>
<dd><code>totalBytesTransferred</code> - total bytes successfully transferred</dd>
<dd><code>success</code> - true if transfer completed successfully, false if aborted/failed</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="handleSiteCommand(java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>handleSiteCommand</h3>
<div class="member-signature"><span class="return-type"><a href="FTPFileOperationResult.html" title="enum in org.bluezoo.gumdrop.ftp">FTPFileOperationResult</a></span>&nbsp;<span class="element-name">handleSiteCommand</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;command,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Handles SITE-specific commands.
 <p>
 The SITE command allows servers to implement custom, non-standard
 commands. This method receives the SITE command arguments and can
 implement whatever custom functionality is needed.
 <p>
 Examples:
 <ul>
 <li>SITE CHMOD - change file permissions</li>
 <li>SITE DISK - show disk usage</li>
 <li>SITE HELP - show custom help</li>
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>command</code> - the SITE command and arguments</dd>
<dd><code>metadata</code> - connection context</dd>
<dt>Returns:</dt>
<dd>operation result, or NOT_SUPPORTED if command is not recognized</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="disconnected(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>disconnected</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">disconnected</span><wbr><span class="parameters">(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Notifies that the client connection has been closed.
 <p>
 This is called when the client disconnects (gracefully with QUIT or
 abruptly due to network issues). The handler should perform final cleanup
 and resource management.
 <p>
 Cleanup actions might include:
 <ul>
 <li>Closing files or streams</li>
 <li>Updating connection statistics</li>
 <li>Logging connection summary</li>
 <li>Releasing any held resources</li>
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>metadata</code> - final connection context with duration and statistics</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isAuthorized(org.bluezoo.gumdrop.ftp.FTPOperation,java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>isAuthorized</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isAuthorized</span><wbr><span class="parameters">(<a href="FTPOperation.html" title="enum in org.bluezoo.gumdrop.ftp">FTPOperation</a>&nbsp;operation,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Checks if the authenticated user is authorized to perform an operation.
 <p>
 This method is called before executing any file or directory operation
 to verify that the user has the required permissions. The default
 implementation allows all operations for backward compatibility.
 <p>
 Implementations can use this for:
 <ul>
 <li>Role-based access control using <a href="FTPRoles.html" title="class in org.bluezoo.gumdrop.ftp"><code>FTPRoles</code></a></li>
 <li>Path-based access control (restrict access to certain directories)</li>
 <li>Time-based restrictions (maintenance windows)</li>
 <li>Quota enforcement</li>
 </ul>
 <p>
 Example role-based implementation:
 <pre><code>
 public boolean isAuthorized(FTPOperation operation, String path,
                            FTPConnectionMetadata metadata) {
     String user = metadata.getAuthenticatedUser();
     
     // Admins can do anything
     if (realm.isUserInRole(user, FTPRoles.ADMIN)) {
         return true;
     }
     
     switch (operation) {
         case READ:
         case NAVIGATE:
             return realm.isUserInRole(user, FTPRoles.READ);
         case WRITE:
         case CREATE_DIR:
             return realm.isUserInRole(user, FTPRoles.WRITE);
         case DELETE:
         case DELETE_DIR:
         case RENAME:
             return realm.isUserInRole(user, FTPRoles.DELETE);
         default:
             return false;
     }
 }
 </code></pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>operation</code> - the type of operation being attempted</dd>
<dd><code>path</code> - the file or directory path (may be null for general queries)</dd>
<dd><code>metadata</code> - connection context including authenticated user</dd>
<dt>Returns:</dt>
<dd>true if the operation is allowed, false to deny with 550 response</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="FTPOperation.html" title="enum in org.bluezoo.gumdrop.ftp"><code>FTPOperation</code></a></li>
<li><a href="FTPRoles.html" title="class in org.bluezoo.gumdrop.ftp"><code>FTPRoles</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getQuotaManager()">
<h3>getQuotaManager</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../quota/QuotaManager.html" title="interface in org.bluezoo.gumdrop.quota">QuotaManager</a></span>&nbsp;<span class="element-name">getQuotaManager</span>()</div>
<div class="block">Gets the quota manager for this handler, if quota enforcement is enabled.
 <p>
 When a quota manager is provided, the FTP connection will check quotas
 before allowing STOR and APPE commands, and will update usage after
 successful uploads and deletes.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the quota manager, or null if quota enforcement is disabled</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../quota/QuotaManager.html" title="interface in org.bluezoo.gumdrop.quota"><code>QuotaManager</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="canStore(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>canStore</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">canStore</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 long&nbsp;bytesToStore,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Checks if storage of the specified size is allowed for the user.
 <p>
 This method is called before STOR and APPE commands to verify
 that the upload would not exceed the user's quota. The default
 implementation uses <a href="#getQuotaManager()"><code>getQuotaManager()</code></a> if available.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>username</code> - the authenticated username</dd>
<dd><code>bytesToStore</code> - number of bytes to be stored</dd>
<dd><code>metadata</code> - connection context</dd>
<dt>Returns:</dt>
<dd>true if storage is allowed, false if quota would be exceeded</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getQuota(java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>getQuota</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../quota/Quota.html" title="class in org.bluezoo.gumdrop.quota">Quota</a></span>&nbsp;<span class="element-name">getQuota</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Gets the current quota status for a user.
 <p>
 This is used by the SITE QUOTA command to display quota information.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>username</code> - the authenticated username</dd>
<dd><code>metadata</code> - connection context</dd>
<dt>Returns:</dt>
<dd>the user's quota, or null if quotas are not enabled</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recordBytesAdded(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>recordBytesAdded</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordBytesAdded</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 long&nbsp;bytesAdded,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Records that bytes were added (after successful upload).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>username</code> - the authenticated username</dd>
<dd><code>bytesAdded</code> - number of bytes that were stored</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recordBytesRemoved(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<h3>recordBytesRemoved</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordBytesRemoved</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 long&nbsp;bytesRemoved,
 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</span></div>
<div class="block">Records that bytes were removed (after successful delete).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>username</code> - the authenticated username</dd>
<dd><code>bytesRemoved</code> - number of bytes that were removed</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><small>Gumdrop is free software distributed under the GNU Lesser General Public License.</small></small></p>
</footer>
</div>
</div>
</body>
</html>
