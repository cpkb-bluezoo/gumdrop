<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.29) on Sat Jan 03 18:09:22 GMT 2026 -->
<title>FTPConnectionHandler (Gumdrop API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2026-01-03">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FTPConnectionHandler (Gumdrop API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":18,"i2":6,"i3":6,"i4":6,"i5":18,"i6":18,"i7":6,"i8":18,"i9":18,"i10":18,"i11":6,"i12":6,"i13":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FTPConnectionHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Gumdrop</b></div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.bluezoo.gumdrop.ftp</a></div>
<h2 title="Interface FTPConnectionHandler" class="title">Interface FTPConnectionHandler</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="file/AnonymousFTPHandler.html" title="class in org.bluezoo.gumdrop.ftp.file">AnonymousFTPHandler</a></code>, <code><a href="file/RoleBasedFTPHandler.html" title="class in org.bluezoo.gumdrop.ftp.file">RoleBasedFTPHandler</a></code>, <code><a href="file/SimpleFTPHandler.html" title="class in org.bluezoo.gumdrop.ftp.file">SimpleFTPHandler</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">FTPConnectionHandler</span></pre>
<div class="block">Handler interface for FTP connection events and business logic.
 <p>
 This interface abstracts away all low-level FTP protocol details and allows
 implementers to focus purely on the business logic of file operations and
 user management. The handler receives high-level events (authentication,
 file operations) along with rich metadata about the connection context.
 <p>
 Key benefits of this abstraction:
 <ul>
 <li><em>Protocol Independence</em> - No need to understand FTP response codes</li>
 <li><em>Rich Context</em> - Access to client IP, certificates, authentication status</li>
 <li><em>Business Focused</em> - Simple enum returns for operation results</li>
 <li><em>File System Abstraction</em> - Work with any storage backend</li>
 <li><em>Connection Lifecycle</em> - Notifications for connection events</li>
 </ul>
 <p>
 Handler instances should be created per-connection to ensure thread safety
 and state isolation between connections:
 <pre><code>
 // Example implementation
 public class MyFTPHandler implements FTPConnectionHandler {
     private final FTPFileSystem fileSystem;
     private final UserDatabase userDb;

     public MyFTPHandler(FTPFileSystem fs, UserDatabase db) {
         this.fileSystem = fs;
         this.userDb = db;
     }

     &#64;Override
     public FTPAuthenticationResult authenticate(String user, String password, 
                                               String account, FTPConnectionMetadata metadata) {
         if (userDb.validateCredentials(user, password)) {
             return FTPAuthenticationResult.SUCCESS;
         }
         return FTPAuthenticationResult.INVALID_PASSWORD;
     }

     &#64;Override
     public FTPFileSystem getFileSystem(FTPConnectionMetadata metadata) {
         // Return file system scoped to authenticated user
         return new UserScopedFileSystem(fileSystem, metadata.getAuthenticatedUser());
     }
 }
 </code></pre></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href='mailto:dog@gnu.org'>Chris Burdess</a></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="FTPAuthenticationResult.html" title="enum in org.bluezoo.gumdrop.ftp"><code>FTPAuthenticationResult</code></a>, 
<a href="FTPFileOperationResult.html" title="enum in org.bluezoo.gumdrop.ftp"><code>FTPFileOperationResult</code></a>, 
<a href="FTPFileSystem.html" title="interface in org.bluezoo.gumdrop.ftp"><code>FTPFileSystem</code></a>, 
<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp"><code>FTPConnectionMetadata</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="FTPAuthenticationResult.html" title="enum in org.bluezoo.gumdrop.ftp">FTPAuthenticationResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#authenticate(java.lang.String,java.lang.String,java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">authenticate</a></span>&#8203;(java.lang.String&nbsp;username,
            java.lang.String&nbsp;password,
            java.lang.String&nbsp;account,
            <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Handles FTP authentication (USER/PASS/ACCT command sequence).</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#canStore(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">canStore</a></span>&#8203;(java.lang.String&nbsp;username,
        long&nbsp;bytesToStore,
        <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Checks if storage of the specified size is allowed for the user.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connected(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">connected</a></span>&#8203;(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Notifies that a new client connection has been established.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#disconnected(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">disconnected</a></span>&#8203;(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Notifies that the client connection has been closed.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="FTPFileSystem.html" title="interface in org.bluezoo.gumdrop.ftp">FTPFileSystem</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFileSystem(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">getFileSystem</a></span>&#8203;(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Provides the file system implementation for this connection.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>default <a href="../quota/Quota.html" title="class in org.bluezoo.gumdrop.quota">Quota</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getQuota(java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">getQuota</a></span>&#8203;(java.lang.String&nbsp;username,
        <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Gets the current quota status for a user.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>default <a href="../quota/QuotaManager.html" title="interface in org.bluezoo.gumdrop.quota">QuotaManager</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getQuotaManager()">getQuotaManager</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets the quota manager for this handler, if quota enforcement is enabled.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="FTPFileOperationResult.html" title="enum in org.bluezoo.gumdrop.ftp">FTPFileOperationResult</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#handleSiteCommand(java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">handleSiteCommand</a></span>&#8203;(java.lang.String&nbsp;command,
                 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Handles SITE-specific commands.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isAuthorized(org.bluezoo.gumdrop.ftp.FTPOperation,java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">isAuthorized</a></span>&#8203;(<a href="FTPOperation.html" title="enum in org.bluezoo.gumdrop.ftp">FTPOperation</a>&nbsp;operation,
            java.lang.String&nbsp;path,
            <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Checks if the authenticated user is authorized to perform an operation.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recordBytesAdded(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">recordBytesAdded</a></span>&#8203;(java.lang.String&nbsp;username,
                long&nbsp;bytesAdded,
                <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Records that bytes were added (after successful upload).</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#recordBytesRemoved(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">recordBytesRemoved</a></span>&#8203;(java.lang.String&nbsp;username,
                  long&nbsp;bytesRemoved,
                  <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Records that bytes were removed (after successful delete).</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transferCompleted(java.lang.String,boolean,long,boolean,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">transferCompleted</a></span>&#8203;(java.lang.String&nbsp;path,
                 boolean&nbsp;upload,
                 long&nbsp;totalBytesTransferred,
                 boolean&nbsp;success,
                 <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Called when a data transfer has completed.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transferProgress(java.lang.String,boolean,java.nio.ByteBuffer,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">transferProgress</a></span>&#8203;(java.lang.String&nbsp;path,
                boolean&nbsp;upload,
                java.nio.ByteBuffer&nbsp;data,
                long&nbsp;totalBytesTransferred,
                <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Called during data transfer to provide transfer progress updates.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transferStarting(java.lang.String,boolean,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">transferStarting</a></span>&#8203;(java.lang.String&nbsp;path,
                boolean&nbsp;upload,
                long&nbsp;size,
                <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</code></th>
<td class="colLast">
<div class="block">Called when a data transfer (upload/download) is starting.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="connected(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connected</h4>
<pre class="methodSignature">java.lang.String&nbsp;connected&#8203;(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Notifies that a new client connection has been established.
 <p>
 This is called immediately after the TCP connection is accepted and any
 SSL/TLS handshake is completed. It provides an opportunity to perform
 early connection-level filtering, logging, or initialization.
 <p>
 The handler can send a custom welcome banner by returning a string,
 or return null to use the default welcome message.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metadata</code> - connection metadata with client and security information</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>custom welcome banner, or null for default</dd>
</dl>
</li>
</ul>
<a id="authenticate(java.lang.String,java.lang.String,java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authenticate</h4>
<pre class="methodSignature"><a href="FTPAuthenticationResult.html" title="enum in org.bluezoo.gumdrop.ftp">FTPAuthenticationResult</a>&nbsp;authenticate&#8203;(java.lang.String&nbsp;username,
                                     java.lang.String&nbsp;password,
                                     java.lang.String&nbsp;account,
                                     <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Handles FTP authentication (USER/PASS/ACCT command sequence).
 <p>
 This method is called to authenticate a user with the provided credentials.
 The implementation should validate the user against whatever authentication
 backend is appropriate (database, LDAP, etc.).
 <p>
 Authentication considerations:
 <ul>
 <li>Anonymous FTP (user="anonymous" or "ftp")</li>
 <li>Standard username/password authentication</li>
 <li>Account information for systems that require it</li>
 <li>Rate limiting for failed attempts</li>
 <li>Account status checking (enabled, expired, etc.)</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - the username from USER command</dd>
<dd><code>password</code> - the password from PASS command (can be null if not provided yet)</dd>
<dd><code>account</code> - the account from ACCT command (can be null if not provided)</dd>
<dd><code>metadata</code> - complete connection context</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>authentication result indicating success, failure, or need for more information</dd>
</dl>
</li>
</ul>
<a id="getFileSystem(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFileSystem</h4>
<pre class="methodSignature"><a href="FTPFileSystem.html" title="interface in org.bluezoo.gumdrop.ftp">FTPFileSystem</a>&nbsp;getFileSystem&#8203;(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Provides the file system implementation for this connection.
 <p>
 This method is called after successful authentication to get the
 file system that should be used for this user's session. Different
 users may get different file system implementations with different
 access rights, root directories, etc.
 <p>
 Examples:
 <ul>
 <li>Anonymous users get read-only access to public directory</li>
 <li>Regular users get access to their home directory</li>
 <li>Admin users get full file system access</li>
 <li>Virtual users get database-backed file systems</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metadata</code> - connection context including authenticated user</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>file system implementation for this user</dd>
</dl>
</li>
</ul>
<a id="transferStarting(java.lang.String,boolean,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferStarting</h4>
<pre class="methodSignature">void&nbsp;transferStarting&#8203;(java.lang.String&nbsp;path,
                      boolean&nbsp;upload,
                      long&nbsp;size,
                      <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Called when a data transfer (upload/download) is starting.
 <p>
 This provides an opportunity to set up logging, progress tracking,
 virus scanning, or other transfer-related processing.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the file path being transferred</dd>
<dd><code>upload</code> - true for upload (STOR), false for download (RETR)</dd>
<dd><code>size</code> - expected transfer size in bytes (-1 if unknown)</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</li>
</ul>
<a id="transferProgress(java.lang.String,boolean,java.nio.ByteBuffer,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferProgress</h4>
<pre class="methodSignature">void&nbsp;transferProgress&#8203;(java.lang.String&nbsp;path,
                      boolean&nbsp;upload,
                      java.nio.ByteBuffer&nbsp;data,
                      long&nbsp;totalBytesTransferred,
                      <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Called during data transfer to provide transfer progress updates.
 <p>
 This method is called periodically during file transfers with
 chunks of data. It can be used for:
 <ul>
 <li>Progress tracking and reporting</li>
 <li>Real-time virus scanning</li>
 <li>Content filtering</li>
 <li>Transfer rate limiting</li>
 <li>Custom logging</li>
 </ul>
 <p>
 The handler should process the data quickly to avoid slowing
 down the transfer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the file path being transferred</dd>
<dd><code>upload</code> - true for upload, false for download</dd>
<dd><code>data</code> - the data chunk being transferred</dd>
<dd><code>totalBytesTransferred</code> - total bytes transferred so far</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</li>
</ul>
<a id="transferCompleted(java.lang.String,boolean,long,boolean,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferCompleted</h4>
<pre class="methodSignature">void&nbsp;transferCompleted&#8203;(java.lang.String&nbsp;path,
                       boolean&nbsp;upload,
                       long&nbsp;totalBytesTransferred,
                       boolean&nbsp;success,
                       <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Called when a data transfer has completed.
 <p>
 This provides an opportunity for cleanup, final processing,
 statistics recording, etc.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the file path that was transferred</dd>
<dd><code>upload</code> - true for upload, false for download</dd>
<dd><code>totalBytesTransferred</code> - total bytes successfully transferred</dd>
<dd><code>success</code> - true if transfer completed successfully, false if aborted/failed</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</li>
</ul>
<a id="handleSiteCommand(java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleSiteCommand</h4>
<pre class="methodSignature"><a href="FTPFileOperationResult.html" title="enum in org.bluezoo.gumdrop.ftp">FTPFileOperationResult</a>&nbsp;handleSiteCommand&#8203;(java.lang.String&nbsp;command,
                                         <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Handles SITE-specific commands.
 <p>
 The SITE command allows servers to implement custom, non-standard
 commands. This method receives the SITE command arguments and can
 implement whatever custom functionality is needed.
 <p>
 Examples:
 <ul>
 <li>SITE CHMOD - change file permissions</li>
 <li>SITE DISK - show disk usage</li>
 <li>SITE HELP - show custom help</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>command</code> - the SITE command and arguments</dd>
<dd><code>metadata</code> - connection context</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>operation result, or NOT_SUPPORTED if command is not recognized</dd>
</dl>
</li>
</ul>
<a id="disconnected(org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disconnected</h4>
<pre class="methodSignature">void&nbsp;disconnected&#8203;(<a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Notifies that the client connection has been closed.
 <p>
 This is called when the client disconnects (gracefully with QUIT or
 abruptly due to network issues). The handler should perform final cleanup
 and resource management.
 <p>
 Cleanup actions might include:
 <ul>
 <li>Closing files or streams</li>
 <li>Updating connection statistics</li>
 <li>Logging connection summary</li>
 <li>Releasing any held resources</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>metadata</code> - final connection context with duration and statistics</dd>
</dl>
</li>
</ul>
<a id="isAuthorized(org.bluezoo.gumdrop.ftp.FTPOperation,java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAuthorized</h4>
<pre class="methodSignature">default&nbsp;boolean&nbsp;isAuthorized&#8203;(<a href="FTPOperation.html" title="enum in org.bluezoo.gumdrop.ftp">FTPOperation</a>&nbsp;operation,
                             java.lang.String&nbsp;path,
                             <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Checks if the authenticated user is authorized to perform an operation.
 <p>
 This method is called before executing any file or directory operation
 to verify that the user has the required permissions. The default
 implementation allows all operations for backward compatibility.
 <p>
 Implementations can use this for:
 <ul>
 <li>Role-based access control using <a href="FTPRoles.html" title="class in org.bluezoo.gumdrop.ftp"><code>FTPRoles</code></a></li>
 <li>Path-based access control (restrict access to certain directories)</li>
 <li>Time-based restrictions (maintenance windows)</li>
 <li>Quota enforcement</li>
 </ul>
 <p>
 Example role-based implementation:
 <pre><code>
 public boolean isAuthorized(FTPOperation operation, String path,
                            FTPConnectionMetadata metadata) {
     String user = metadata.getAuthenticatedUser();
     
     // Admins can do anything
     if (realm.isUserInRole(user, FTPRoles.ADMIN)) {
         return true;
     }
     
     switch (operation) {
         case READ:
         case NAVIGATE:
             return realm.isUserInRole(user, FTPRoles.READ);
         case WRITE:
         case CREATE_DIR:
             return realm.isUserInRole(user, FTPRoles.WRITE);
         case DELETE:
         case DELETE_DIR:
         case RENAME:
             return realm.isUserInRole(user, FTPRoles.DELETE);
         default:
             return false;
     }
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>operation</code> - the type of operation being attempted</dd>
<dd><code>path</code> - the file or directory path (may be null for general queries)</dd>
<dd><code>metadata</code> - connection context including authenticated user</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the operation is allowed, false to deny with 550 response</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="FTPOperation.html" title="enum in org.bluezoo.gumdrop.ftp"><code>FTPOperation</code></a>, 
<a href="FTPRoles.html" title="class in org.bluezoo.gumdrop.ftp"><code>FTPRoles</code></a></dd>
</dl>
</li>
</ul>
<a id="getQuotaManager()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQuotaManager</h4>
<pre class="methodSignature">default&nbsp;<a href="../quota/QuotaManager.html" title="interface in org.bluezoo.gumdrop.quota">QuotaManager</a>&nbsp;getQuotaManager()</pre>
<div class="block">Gets the quota manager for this handler, if quota enforcement is enabled.
 <p>
 When a quota manager is provided, the FTP connection will check quotas
 before allowing STOR and APPE commands, and will update usage after
 successful uploads and deletes.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the quota manager, or null if quota enforcement is disabled</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../quota/QuotaManager.html" title="interface in org.bluezoo.gumdrop.quota"><code>QuotaManager</code></a></dd>
</dl>
</li>
</ul>
<a id="canStore(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canStore</h4>
<pre class="methodSignature">default&nbsp;boolean&nbsp;canStore&#8203;(java.lang.String&nbsp;username,
                         long&nbsp;bytesToStore,
                         <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Checks if storage of the specified size is allowed for the user.
 <p>
 This method is called before STOR and APPE commands to verify
 that the upload would not exceed the user's quota. The default
 implementation uses <a href="#getQuotaManager()"><code>getQuotaManager()</code></a> if available.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - the authenticated username</dd>
<dd><code>bytesToStore</code> - number of bytes to be stored</dd>
<dd><code>metadata</code> - connection context</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if storage is allowed, false if quota would be exceeded</dd>
</dl>
</li>
</ul>
<a id="getQuota(java.lang.String,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQuota</h4>
<pre class="methodSignature">default&nbsp;<a href="../quota/Quota.html" title="class in org.bluezoo.gumdrop.quota">Quota</a>&nbsp;getQuota&#8203;(java.lang.String&nbsp;username,
                       <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Gets the current quota status for a user.
 <p>
 This is used by the SITE QUOTA command to display quota information.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - the authenticated username</dd>
<dd><code>metadata</code> - connection context</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the user's quota, or null if quotas are not enabled</dd>
</dl>
</li>
</ul>
<a id="recordBytesAdded(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordBytesAdded</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;recordBytesAdded&#8203;(java.lang.String&nbsp;username,
                              long&nbsp;bytesAdded,
                              <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Records that bytes were added (after successful upload).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - the authenticated username</dd>
<dd><code>bytesAdded</code> - number of bytes that were stored</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</li>
</ul>
<a id="recordBytesRemoved(java.lang.String,long,org.bluezoo.gumdrop.ftp.FTPConnectionMetadata)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>recordBytesRemoved</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;recordBytesRemoved&#8203;(java.lang.String&nbsp;username,
                                long&nbsp;bytesRemoved,
                                <a href="FTPConnectionMetadata.html" title="class in org.bluezoo.gumdrop.ftp">FTPConnectionMetadata</a>&nbsp;metadata)</pre>
<div class="block">Records that bytes were removed (after successful delete).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - the authenticated username</dd>
<dd><code>bytesRemoved</code> - number of bytes that were removed</dd>
<dd><code>metadata</code> - connection context</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FTPConnectionHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Copyright &copy; 2005, 2025 Chris Burdess. Licensed under LGPL.</div>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><small>Gumdrop is free software distributed under the GNU Lesser General Public License.</small></small></p>
</footer>
</body>
</html>
