<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 555" width="1200" height="555">
  <defs>
    <marker id="filled" markerWidth="12" markerHeight="12" refX="12" refY="6"
            orient="auto" markerUnits="userSpaceOnUse">
      <polygon points="0 0, 12 6, 0 12" fill="#333"/>
    </marker>
    <marker id="open" markerWidth="10" markerHeight="10" refX="10" refY="5"
            orient="auto" markerUnits="userSpaceOnUse">
      <polyline points="0 0, 10 5, 0 10" fill="none" stroke="#555" stroke-width="1.5"/>
    </marker>
  </defs>

  <style>
    .cls     { font: bold 11px sans-serif; fill: #333; }
    .cls-sm  { font: bold 10px sans-serif; fill: #333; }
    .abst    { font: bold italic 11px sans-serif; fill: #333; }
    .iface   { font: italic 11px sans-serif; fill: #333; }
    .stereo  { font: italic 9px sans-serif; fill: #666; }
    .pkg     { font: 10px sans-serif; fill: #888; }
    .title   { font: bold 15px sans-serif; fill: #333; }
    .stub    { font: bold 10px sans-serif; fill: #888; }
  </style>

  <!-- Background -->
  <rect width="1200" height="555" fill="#fefefe"/>

  <!-- Title -->
  <text x="600" y="22" text-anchor="middle" class="title">Gumdrop Class Hierarchy</text>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- LAYER 1: CONNECTION LINES (drawn first — behind everything)   -->
  <!-- ═══════════════════════════════════════════════════════════════ -->

  <!-- Gumdrop owns Service and Listener (open arrows) -->
  <line x1="150" y1="63" x2="150" y2="100" stroke="#555" stroke-width="1" marker-end="url(#open)"/>
  <line x1="570" y1="63" x2="570" y2="100" stroke="#555" stroke-width="1" marker-end="url(#open)"/>

  <!-- Listener-extends bus: TCPListener and UDPListener extend Listener -->
  <line x1="360" y1="158" x2="770" y2="158" stroke="#333" stroke-width="1.5"/>
  <line x1="570" y1="158" x2="570" y2="138" stroke="#333" stroke-width="1.5" marker-end="url(#filled)"/>
  <line x1="360" y1="175" x2="360" y2="158" stroke="#333" stroke-width="1.5"/>
  <line x1="770" y1="175" x2="770" y2="158" stroke="#333" stroke-width="1.5"/>

  <!-- Service-implements bus -->
  <line x1="94"  y1="230" x2="945" y2="230" stroke="#333" stroke-width="1.5"/>
  <line x1="150" y1="230" x2="150" y2="138" stroke="#333" stroke-width="1.5" marker-end="url(#filled)"/>
  <line x1="94"  y1="280" x2="94"  y2="230" stroke="#333" stroke-width="1.5"/>
  <line x1="299" y1="280" x2="299" y2="230" stroke="#333" stroke-width="1.5"/>
  <line x1="455" y1="280" x2="455" y2="230" stroke="#333" stroke-width="1.5"/>
  <line x1="613" y1="280" x2="613" y2="230" stroke="#333" stroke-width="1.5"/>
  <line x1="763" y1="280" x2="763" y2="230" stroke="#333" stroke-width="1.5"/>
  <line x1="945" y1="280" x2="945" y2="230" stroke="#333" stroke-width="1.5"/>

  <!-- TCP-extends bus -->
  <line x1="91"  y1="240" x2="1024" y2="240" stroke="#333" stroke-width="1.5"/>
  <line x1="360" y1="240" x2="360"  y2="213" stroke="#333" stroke-width="1.5" marker-end="url(#filled)"/>
  <line x1="91"  y1="335" x2="91"   y2="240" stroke="#333" stroke-width="1.5"/>
  <line x1="302" y1="335" x2="302"  y2="240" stroke="#333" stroke-width="1.5"/>
  <line x1="459" y1="335" x2="459"  y2="240" stroke="#333" stroke-width="1.5"/>
  <line x1="610" y1="335" x2="610"  y2="240" stroke="#333" stroke-width="1.5"/>
  <line x1="767" y1="335" x2="767"  y2="240" stroke="#333" stroke-width="1.5"/>
  <line x1="1024" y1="335" x2="1024" y2="240" stroke="#888" stroke-width="1" stroke-dasharray="4,2"/>

  <!-- UDP-extends bus -->
  <line x1="96"  y1="248" x2="1034" y2="248" stroke="#333" stroke-width="1.5"/>
  <line x1="770" y1="248" x2="770"  y2="213" stroke="#333" stroke-width="1.5" marker-end="url(#filled)"/>
  <line x1="96"  y1="373" x2="96"   y2="248" stroke="#333" stroke-width="1.5"/>
  <line x1="910" y1="335" x2="910"  y2="248" stroke="#333" stroke-width="1.5"/>
  <line x1="1034" y1="373" x2="1034" y2="248" stroke="#888" stroke-width="1" stroke-dasharray="4,2"/>

  <!-- Service-owns-Listener arrows (open) -->
  <line x1="70"  y1="313" x2="70"  y2="335" stroke="#555" stroke-width="1" marker-end="url(#open)"/>
  <line x1="50"  y1="313" x2="50"  y2="373" stroke="#555" stroke-width="1" marker-end="url(#open)"/>
  <line x1="265" y1="313" x2="265" y2="335" stroke="#555" stroke-width="1" marker-end="url(#open)"/>
  <line x1="425" y1="313" x2="425" y2="335" stroke="#555" stroke-width="1" marker-end="url(#open)"/>
  <line x1="583" y1="313" x2="583" y2="335" stroke="#555" stroke-width="1" marker-end="url(#open)"/>
  <line x1="735" y1="313" x2="735" y2="335" stroke="#555" stroke-width="1" marker-end="url(#open)"/>
  <line x1="885" y1="313" x2="885" y2="335" stroke="#555" stroke-width="1" marker-end="url(#open)"/>
  <line x1="1016" y1="313" x2="1016" y2="335" stroke="#555" stroke-width="1" marker-end="url(#open)"/>
  <line x1="1005" y1="313" x2="1005" y2="373" stroke="#555" stroke-width="1" marker-end="url(#open)"/>

  <!-- Servlet/WebDAV extends HTTPService -->
  <line x1="91"  y1="420" x2="222" y2="420" stroke="#333" stroke-width="1.5"/>
  <line x1="94"  y1="420" x2="94"  y2="313" stroke="#333" stroke-width="1.5" marker-end="url(#filled)"/>
  <line x1="91"  y1="442" x2="91"  y2="420" stroke="#333" stroke-width="1.5"/>
  <line x1="222" y1="442" x2="222" y2="420" stroke="#333" stroke-width="1.5"/>

  <!-- MailboxStore implements -->
  <line x1="573" y1="494" x2="732" y2="494" stroke="#333" stroke-width="1.5"/>
  <line x1="640" y1="494" x2="640" y2="478" stroke="#333" stroke-width="1.5" marker-end="url(#filled)"/>
  <line x1="573" y1="503" x2="573" y2="494" stroke="#333" stroke-width="1.5"/>
  <line x1="732" y1="503" x2="732" y2="494" stroke="#333" stroke-width="1.5"/>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- LAYER 2: PACKAGE BACKGROUNDS (dashed rects, no fill)          -->
  <!-- ═══════════════════════════════════════════════════════════════ -->

  <rect x="20"  y="262" width="195" height="158" rx="4" fill="none" stroke="#bbb" stroke-dasharray="4,2"/>
  <rect x="225" y="262" width="148" height="108" rx="4" fill="none" stroke="#bbb" stroke-dasharray="4,2"/>
  <rect x="383" y="262" width="148" height="108" rx="4" fill="none" stroke="#bbb" stroke-dasharray="4,2"/>
  <rect x="541" y="262" width="143" height="108" rx="4" fill="none" stroke="#bbb" stroke-dasharray="4,2"/>
  <rect x="694" y="262" width="138" height="108" rx="4" fill="none" stroke="#bbb" stroke-dasharray="4,2"/>
  <rect x="842" y="262" width="250" height="158" rx="4" fill="none" stroke="#bbb" stroke-dasharray="4,2"/>
  <rect x="20"  y="425" width="270" height="55"  rx="4" fill="none" stroke="#bbb" stroke-dasharray="4,2"/>
  <rect x="490" y="425" width="320" height="120" rx="4" fill="none" stroke="#bbb" stroke-dasharray="4,2"/>

  <!-- Package labels -->
  <text x="30"  y="275" class="pkg">http</text>
  <text x="235" y="275" class="pkg">smtp</text>
  <text x="393" y="275" class="pkg">imap</text>
  <text x="551" y="275" class="pkg">pop3</text>
  <text x="704" y="275" class="pkg">ftp</text>
  <text x="852" y="275" class="pkg">dns</text>
  <text x="30"  y="438" class="pkg">servlet / webdav</text>
  <text x="500" y="438" class="pkg">mailbox</text>

  <!-- ═══════════════════════════════════════════════════════════════ -->
  <!-- LAYER 3: CLASS BOXES (solid fill — on top of lines)           -->
  <!-- ═══════════════════════════════════════════════════════════════ -->

  <!-- Gumdrop -->
  <rect x="100" y="35" width="1000" height="28" rx="6" fill="#fce8e8" stroke="#c0392b" stroke-width="2"/>
  <text x="600" y="54" text-anchor="middle" class="cls" style="font-size:13px">Gumdrop</text>

  <!-- Service (interface) -->
  <rect x="90" y="100" width="120" height="38" fill="#e8fce8" stroke="#5a9a3c" stroke-width="2"/>
  <line x1="90" y1="116" x2="210" y2="116" stroke="#5a9a3c"/>
  <text x="150" y="113" text-anchor="middle" class="stereo">&lt;&lt;interface&gt;&gt;</text>
  <text x="150" y="131" text-anchor="middle" class="iface">Service</text>

  <!-- Listener (abstract) -->
  <rect x="500" y="100" width="140" height="38" fill="#e8f4fc" stroke="#4a90d9" stroke-width="2"/>
  <line x1="500" y1="116" x2="640" y2="116" stroke="#4a90d9"/>
  <text x="570" y="113" text-anchor="middle" class="stereo">&lt;&lt;abstract&gt;&gt;</text>
  <text x="570" y="131" text-anchor="middle" class="abst">Listener</text>

  <!-- TCPListener -->
  <rect x="280" y="175" width="160" height="38" fill="#e8f4fc" stroke="#4a90d9" stroke-width="2"/>
  <line x1="280" y1="191" x2="440" y2="191" stroke="#4a90d9"/>
  <text x="360" y="188" text-anchor="middle" class="stereo">&lt;&lt;abstract&gt;&gt;</text>
  <text x="360" y="206" text-anchor="middle" class="abst">TCPListener</text>

  <!-- UDPListener -->
  <rect x="690" y="175" width="160" height="38" fill="#e8f4fc" stroke="#4a90d9" stroke-width="2"/>
  <line x1="690" y1="191" x2="850" y2="191" stroke="#4a90d9"/>
  <text x="770" y="188" text-anchor="middle" class="stereo">&lt;&lt;abstract&gt;&gt;</text>
  <text x="770" y="206" text-anchor="middle" class="abst">UDPListener</text>

  <!-- HTTPService -->
  <rect x="32" y="280" width="125" height="33" rx="3" fill="#d4fcd4" stroke="#2d8a2d" stroke-width="1.5"/>
  <text x="94" y="301" text-anchor="middle" class="cls">HTTPService</text>

  <!-- HTTPListener -->
  <rect x="32" y="335" width="118" height="28" rx="3" fill="#d4e8fc" stroke="#4a90d9" stroke-width="1.5"/>
  <text x="91" y="354" text-anchor="middle" class="cls-sm">HTTPListener</text>

  <!-- HTTP3Listener -->
  <rect x="32" y="373" width="128" height="28" rx="3" fill="#d4e8fc" stroke="#4a90d9" stroke-width="1.5"/>
  <text x="96" y="392" text-anchor="middle" class="cls-sm">HTTP3Listener</text>

  <!-- SMTPService -->
  <rect x="237" y="280" width="125" height="33" rx="3" fill="#d4fcd4" stroke="#2d8a2d" stroke-width="1.5"/>
  <text x="299" y="301" text-anchor="middle" class="cls">SMTPService</text>

  <!-- SMTPListener -->
  <rect x="242" y="335" width="120" height="28" rx="3" fill="#d4e8fc" stroke="#4a90d9" stroke-width="1.5"/>
  <text x="302" y="354" text-anchor="middle" class="cls-sm">SMTPListener</text>

  <!-- IMAPService -->
  <rect x="395" y="280" width="120" height="33" rx="3" fill="#d4fcd4" stroke="#2d8a2d" stroke-width="1.5"/>
  <text x="455" y="301" text-anchor="middle" class="cls">IMAPService</text>

  <!-- IMAPListener -->
  <rect x="400" y="335" width="118" height="28" rx="3" fill="#d4e8fc" stroke="#4a90d9" stroke-width="1.5"/>
  <text x="459" y="354" text-anchor="middle" class="cls-sm">IMAPListener</text>

  <!-- POP3Service -->
  <rect x="553" y="280" width="120" height="33" rx="3" fill="#d4fcd4" stroke="#2d8a2d" stroke-width="1.5"/>
  <text x="613" y="301" text-anchor="middle" class="cls">POP3Service</text>

  <!-- POP3Listener -->
  <rect x="553" y="335" width="115" height="28" rx="3" fill="#d4e8fc" stroke="#4a90d9" stroke-width="1.5"/>
  <text x="610" y="354" text-anchor="middle" class="cls-sm">POP3Listener</text>

  <!-- FTPService -->
  <rect x="706" y="280" width="115" height="33" rx="3" fill="#d4fcd4" stroke="#2d8a2d" stroke-width="1.5"/>
  <text x="763" y="301" text-anchor="middle" class="cls">FTPService</text>

  <!-- FTPListener -->
  <rect x="712" y="335" width="110" height="28" rx="3" fill="#d4e8fc" stroke="#4a90d9" stroke-width="1.5"/>
  <text x="767" y="354" text-anchor="middle" class="cls-sm">FTPListener</text>

  <!-- DNSService -->
  <rect x="855" y="280" width="180" height="33" rx="3" fill="#d4fcd4" stroke="#2d8a2d" stroke-width="1.5"/>
  <text x="945" y="301" text-anchor="middle" class="cls">DNSService</text>

  <!-- DNSListener -->
  <rect x="855" y="335" width="110" height="28" rx="3" fill="#d4e8fc" stroke="#4a90d9" stroke-width="1.5"/>
  <text x="910" y="354" text-anchor="middle" class="cls-sm">DNSListener</text>

  <!-- DoTListener (stub) -->
  <rect x="975" y="335" width="98" height="28" rx="3" fill="#e8e8e8" stroke="#999" stroke-width="1.5" stroke-dasharray="3,2"/>
  <text x="1024" y="354" text-anchor="middle" class="stub">DoTListener</text>

  <!-- DoQListener (stub) -->
  <rect x="985" y="373" width="98" height="28" rx="3" fill="#e8e8e8" stroke="#999" stroke-width="1.5" stroke-dasharray="3,2"/>
  <text x="1034" y="392" text-anchor="middle" class="stub">DoQListener</text>

  <!-- ServletService -->
  <rect x="32" y="442" width="118" height="30" rx="3" fill="#d4fcd4" stroke="#2d8a2d" stroke-width="1.5"/>
  <text x="91" y="462" text-anchor="middle" class="cls-sm">ServletService</text>

  <!-- WebDAVService -->
  <rect x="165" y="442" width="115" height="30" rx="3" fill="#d4fcd4" stroke="#2d8a2d" stroke-width="1.5"/>
  <text x="222" y="462" text-anchor="middle" class="cls-sm">WebDAVService</text>

  <!-- MailboxStore (interface) -->
  <rect x="580" y="442" width="120" height="36" fill="#e8fce8" stroke="#5a9a3c" stroke-width="2"/>
  <line x1="580" y1="458" x2="700" y2="458" stroke="#5a9a3c"/>
  <text x="640" y="455" text-anchor="middle" class="stereo">&lt;&lt;interface&gt;&gt;</text>
  <text x="640" y="472" text-anchor="middle" class="iface">MailboxStore</text>

  <!-- MboxMailboxStore -->
  <rect x="498" y="503" width="150" height="28" rx="3" fill="#fcf8e8" stroke="#d4a017" stroke-width="1.5"/>
  <text x="573" y="522" text-anchor="middle" class="cls-sm">MboxMailboxStore</text>

  <!-- MaildirMailboxStore -->
  <rect x="660" y="503" width="145" height="28" rx="3" fill="#fcf8e8" stroke="#d4a017" stroke-width="1.5"/>
  <text x="732" y="522" text-anchor="middle" class="cls-sm">MaildirMailboxStore</text>

</svg>
